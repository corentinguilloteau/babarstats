(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{14:function(e,t,a){},18:function(e,t,a){},44:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var s=a(26),n=a(22),i=a(2),r=a(3),c=a(5),o=a(4),l=a(1),d=a.n(l),u=a(16),p=a.n(u),h=(a(44),a(14),a(18),a(13)),j=a(0),m=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={value:"",loaded:!1},s}return Object(r.a)(a,[{key:"getValue",value:function(){var e=this;this.setState({loaded:!1}),fetch(this.props.apiURL,{headers:{"Content-Type":"application/json",Accept:"application/plain-text"}}).then((function(e){return e.text()})).then((function(t){e.setState({value:t,loaded:!0})}),(function(e){}))}},{key:"componentDidMount",value:function(){this.getValue()}},{key:"componentDidUpdate",value:function(e){this.props.updateEvent!==e.updateEvent&&this.getValue()}},{key:"render",value:function(){return Object(j.jsx)("div",{name:this.props.name,className:"col-12 col-sm-6 col-xxl-3 d-flex",children:Object(j.jsx)("div",{className:"card",children:Object(j.jsxs)("div",{className:"card-body py-4",children:[!this.state.loaded&&Object(j.jsx)("div",{className:"spinner-container",children:Object(j.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(j.jsx)("span",{className:"sr-only",children:"Loading..."})})}),this.state.loaded&&Object(j.jsxs)("div",{className:"media",children:[Object(j.jsxs)("div",{className:"media-body",children:[Object(j.jsx)("h3",{className:"mb-2",children:(this.props.prefix||"")+this.state.value+(this.props.suffix||"")}),Object(j.jsx)("p",{className:"mb-2",children:this.props.name})]}),Object(j.jsx)("div",{className:"icon-block ml-3",children:Object(j.jsx)("div",{className:"round d-flex align-items-center justify-content-center "+this.props.color,children:Object(j.jsx)("i",{className:"fas fa-fw fa-"+this.props.icon})})})]})]})})})}}]),a}(d.a.Component),b=Object(h.b)((function(e){return{updateEvent:e.updateEvent}}))(m),f=a(21),v=(a(55),a(56),function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={loaded:!1,rowData:[]},s}return Object(r.a)(a,[{key:"getData",value:function(){var e=this;this.setState({loaded:!1}),fetch(this.props.apiURL,{method:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({loaded:!0,rowData:t})}),(function(t){e.setState({loaded:!1,rowData:[]}),console.log(t)}))}},{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e){this.props.updateEvent!==e.updateEvent&&this.getData()}},{key:"buttonCellRenderer",value:function(e){return'<a class="btn btn-primary" href="'+this.props.baseURL+e.value+'" role="button">'+this.props.buttonText+"</a>"}},{key:"linkCellRender",value:function(e){return'<a href="'+e.value.href+e.value.id+'/">'+e.value.value+"</a>"}},{key:"autosizeColumnsIfNeeded",value:function(e){var t=e.api.gridPanel.eBodyViewport.clientWidth,a=e.api.gridPanel.columnController.getAllDisplayedColumns();e.api.gridPanel.columnController.getWidthOfColsInList(a)<t&&e.api.sizeColumnsToFit()}},{key:"onGridReady",value:function(e){var t=this;this.autosizeColumnsIfNeeded(e),window.onresize=function(){t.autosizeColumnsIfNeeded(e)},this.props.defaultSort&&e.columnApi.applyColumnState({state:[{colId:this.props.defaultSort.col,sort:this.props.defaultSort.sort}],defaultState:{sort:null}})}},{key:"getColumn",value:function(e){return e.href?Object(j.jsx)(f.AgGridColumn,{headerName:e.name,field:e.apiKey,sortable:this.props.sort||!1,filter:this.props.filter||!1,floatingFilter:this.props.floatingFilter||!1,cellRenderer:this.linkCellRender.bind(this)}):Object(j.jsx)(f.AgGridColumn,{headerName:e.name,field:e.apiKey,sortable:this.props.sort||!1,filter:this.props.filter||!1,floatingFilter:this.props.floatingFilter||!1})}},{key:"render",value:function(){var e=this;return Object(j.jsx)("div",{className:"d-flex"+this.props.bootstrapSubdiv,children:Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsxs)("h5",{className:"car-title mt-2",children:[" ",this.props.name," "]})}),!this.state.loaded&&Object(j.jsx)("div",{className:"card-body py-4",children:Object(j.jsx)("div",{className:"spinner-container",children:Object(j.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(j.jsx)("span",{className:"sr-only",children:"Loading..."})})})}),this.state.loaded&&Object(j.jsx)("div",{className:"card-body py-2",children:Object(j.jsx)("div",{className:"ag-theme-material",children:Object(j.jsxs)(f.AgGridReact,{rowData:this.state.rowData,onGridReady:this.onGridReady.bind(this),pagination:!0,paginationPageSize:this.props.pageSize||30,domLayout:"autoHeight",suppressCellSelection:!0,style:{"min-width":"100%",height:"100%;"},fullWidthCellRenderer:"fullWidthCellRenderer",children:[this.props.header.map((function(t){return e.getColumn(t)})),this.props.buttonText&&Object(j.jsx)(f.AgGridColumn,{headerName:"",field:this.props.idField,cellRenderer:this.buttonCellRenderer.bind(this)})]})})})]})})}}]),a}(d.a.Component)),O=Object(h.b)((function(e){return{updateEvent:e.updateEvent}}))(v),x=a(28),y=a(12),g=a.n(y),N=a(39),k=a.n(N),S=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={data:[],layout:{}},s}return Object(r.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{name:this.props.name,className:"d-flex"+this.props.bootstrapSubdiv,children:Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsx)("h5",{className:"car-title mt-2",children:this.props.name})}),!this.props.loaded&&Object(j.jsx)("div",{className:"card-body py-4",children:Object(j.jsx)("div",{className:"spinner-container",children:Object(j.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(j.jsx)("span",{className:"sr-only",children:"Loading..."})})})}),this.props.loaded&&Object(j.jsxs)("div",{className:"card-body py-2",children:[Object(j.jsx)(k.a,{style:{height:"100%",minHeight:"40vw",width:"100%"},data:this.props.data,layout:this.props.layout,config:{responsive:!0}})," "]})]})})}}]),a}(d.a.Component),D=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={data:[],layout:{},loaded:!1},s}return Object(r.a)(a,[{key:"getDate",value:function(e){return g()(e).format("YYYY-MM-DD")}},{key:"unpack",value:function(e,t){return e.map((function(e){return e[t]}))}},{key:"display",value:function(e){var t={x:this.unpack(e,"x"),y:this.unpack(e,"y"),name:"Consommation journali\xe8res",yaxis:"y2",type:"bar"},a={bargap:.1,bargroupgap:.2,showlegend:!1,barmode:"overlay",xaxis:{autorange:!0,range:[this.getDate(g()(e[e.length-1].x).subtract(1,"months").format("YYYY-MM-DD")),this.getDate(e[e.length-1].x)],rangeselector:{buttons:[{count:1,label:"1 mois",step:"month",stepmode:"backward"},{count:6,label:"6 mois",step:"month",stepmode:"backward"},{step:"all",label:"Tout"}]},rangeslider:{range:[this.getDate(e[0].x),this.getDate(e[e.length-1].x)]},type:"date"},yaxis:{title:"Vente journali\xe8re",titlefont:{color:"rgb(255, 127, 14)"},tickfont:{color:"rgb(255, 127, 14)"},side:"right"}};this.setState({layout:a,data:[t],loaded:!0})}},{key:"processData",value:function(e){var t,a=[],s=0,n=g()(e[0].timestamp),i=Object(x.a)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,c=g()(r.timestamp);c.subtract(6,"hours"),c.dayOfYear()!==n.dayOfYear()||c.year()!==n.year()?(a.push({x:n.format("YYYY-MM-DD")+" 00:00:00",y:s}),n=c,s=0,s++):s++}}catch(o){i.e(o)}finally{i.f()}a.push({x:n.format("YYYY-MM-DD")+" 00:00:00",y:s}),this.display(a)}},{key:"fetchData",value:function(){var e=this;this.setState({loaded:!1}),fetch(this.props.apiURL,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){e.processData(t)}),(function(e){console.log(e)}))}},{key:"componentDidUpdate",value:function(e){this.props.updateEvent!==e.updateEvent&&this.fetchData()}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){return Object(j.jsx)(S,{bootstrapSubdiv:this.props.bootstrapSubdiv||"col d-flex",layout:this.state.layout,data:this.state.data,name:this.props.name,loaded:this.state.loaded})}}]),a}(d.a.Component),C=Object(h.b)((function(e){return{updateEvent:e.updateEvent}}))(D),w=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={},s}return Object(r.a)(a,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("div",{className:"row mb-2 mb-xl-3",children:Object(j.jsx)("div",{className:"col-auto d-none d-sm-block",children:Object(j.jsx)("h3",{children:"Dashboard"})})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)(b,{apiURL:"/api/purchases/money/today",name:"Ventes du jour",icon:"euro-sign",color:"green",suffix:" \u20ac"}),Object(j.jsx)(b,{apiURL:"/api/purchases/count/today",name:"Nombre de consos aujourd'hui",icon:"beer",color:"yellow"}),Object(j.jsx)(b,{apiURL:"/api/purchases/count/yesterday",name:"Nombre de consos hier",icon:"beer",color:"yellow"})]}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)(C,{name:"Historique des ventes",apiURL:"/api/purchases",bootstrapSubdiv:"col-12 col-sm-8 d-flex"}),Object(j.jsx)(O,{bootstrapSubdiv:"col-12 col-sm-4 d-flex",name:"Derni\xe8res consos",apiURL:"/api/purchases/history",pageSize:14,header:[{name:"Surnom",apiKey:"customer",href:!0},{name:"Produit",apiKey:"product",href:!0},{name:"Date",apiKey:"date"}]})]})]})}}]),a}(d.a.Component),U=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={isLoaded:!1,users:[]},s}return Object(r.a)(a,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("div",{className:"row mb-2 mb-xl-3",children:Object(j.jsx)("div",{className:"col-auto d-none d-sm-block",children:Object(j.jsx)("h3",{children:"Clients"})})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)(O,{bootstrapSubdiv:"col",name:"Clients",apiURL:"/api/clients",baseURL:"/clients/",buttonText:"Voir plus",idField:"id",header:[{name:"Surnom",apiKey:"surname"},{name:"Montant d\xe9pens\xe9",apiKey:"spent"},{name:"Promotion",apiKey:"year"},{name:"Status",apiKey:"status"}],floatingFilter:!0,filter:!0,sort:!0})})]})}}]),a}(d.a.Component),Y=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={data:[],layout:{},loaded:!1},s}return Object(r.a)(a,[{key:"getDate",value:function(e){return g()(e).format("YYYY-MM-DD")}},{key:"unpack",value:function(e,t){return e.map((function(e){return e[t]}))}},{key:"display",value:function(e,t){var a={type:"scatter",mode:"lines",name:"Cumul",x:this.unpack(e,"x"),y:this.unpack(e,"y"),line:{color:"#EF78B1"}},s={x:this.unpack(t,"x"),y:this.unpack(t,"y"),name:"Consommation journali\xe8res",yaxis:"y2",type:"bar"},n={bargap:.1,bargroupgap:.2,showlegend:!1,barmode:"overlay",xaxis:{autorange:!0,range:[this.getDate(g()(e[e.length-1].x).subtract(1,"months").format("YYYY-MM-DD")),this.getDate(e[e.length-1].x)],rangeselector:{buttons:[{count:1,label:"1 mois",step:"month",stepmode:"backward"},{count:6,label:"6 mois",step:"month",stepmode:"backward"},{step:"all",label:"Tout"}]},rangeslider:{range:[this.getDate(e[0].x),this.getDate(e[e.length-1].x)]},type:"date"},yaxis:{title:"Consos cumul\xe9es",autorange:!0,type:"linear",overlaying:"y2"},yaxis2:{title:"Consos journali\xe8res",titlefont:{color:"rgb(255, 127, 14)"},tickfont:{color:"rgb(255, 127, 14)"},side:"right"}};this.setState({layout:n,data:[a,s],loaded:!0})}},{key:"processData",value:function(e){var t,a=[],s=[],n=0,i=0,r=g()(e[0].timestamp),c=Object(x.a)(e);try{for(c.s();!(t=c.n()).done;){var o=t.value;n++,a.push({x:g()(o.timestamp).format("YYYY-MM-DD HH:mm:ss"),y:n});var l=g()(o.timestamp);l.subtract(6,"hours"),l.dayOfYear()!==r.dayOfYear()||l.year()!==r.year()?(s.push({x:r.format("YYYY-MM-DD")+" 00:00:00",y:i}),r=l,i=0,i++):i++}}catch(d){c.e(d)}finally{c.f()}s.push({x:r.format("YYYY-MM-DD")+" 00:00:00",y:i}),this.display(a,s)}},{key:"fetchData",value:function(){var e=this;this.setState({loaded:!1}),fetch(this.props.apiURL,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){e.processData(t)}),(function(e){console.log(e)}))}},{key:"componentDidUpdate",value:function(e){this.props.updateEvent!==e.updateEvent&&this.fetchData()}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){return Object(j.jsx)(S,{layout:this.state.layout,data:this.state.data,name:this.props.name,loaded:this.state.loaded})}}]),a}(d.a.Component),R=Object(h.b)((function(e){return{updateEvent:e.updateEvent}}))(Y),L=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={surname:""},s}return Object(r.a)(a,[{key:"getName",value:function(){var e=this;fetch("/api/clients/"+this.props.match.params.id+"/profil",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({surname:t.nickname})}),(function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.getName()}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("div",{className:"row mb-2 mb-xl-3",children:Object(j.jsx)("div",{className:"col-auto d-none d-sm-block",children:Object(j.jsx)("h3",{children:this.state.surname})})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)(b,{apiURL:"/api/clients/"+this.props.match.params.id+"/spent",suffix:" \u20ac",name:"Montant d\xe9pens\xe9",icon:"euro-sign",color:"green"}),Object(j.jsx)(b,{apiURL:"/api/clients/"+this.props.match.params.id+"/rank/promo",prefix:"#",name:"Classement promo",icon:"medal",color:"yellow"}),Object(j.jsx)(b,{apiURL:"/api/clients/"+this.props.match.params.id+"/rank/total",prefix:"#",name:"Classement g\xe9n\xe9ral",icon:"trophy",color:"yellow"})]}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)(R,{name:"Historique",apiURL:"/api/clients/"+this.props.match.params.id+"/purchases"})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)(O,{bootstrapSubdiv:"col-12 col-sm-6",name:"Historique",apiURL:"/api/clients/"+this.props.match.params.id+"/history",pageSize:10,header:[{name:"Produit",apiKey:"product",href:!0},{name:"Date",apiKey:"datetime"}]}),Object(j.jsx)(O,{bootstrapSubdiv:"col-12 col-sm-6",name:"Top consommation",apiURL:"/api/clients/"+this.props.match.params.id+"/top_products",pageSize:10,header:[{name:"Produit",apiKey:"product",href:!0},{name:"Quantit\xe9",apiKey:"quantity"}]})]})]})}}]),a}(d.a.Component),M=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={isLoaded:!1,users:[]},s}return Object(r.a)(a,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("div",{className:"row mb-2 mb-xl-3",children:Object(j.jsx)("div",{className:"col-auto d-none d-sm-block",children:Object(j.jsx)("h3",{children:"Produits"})})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)(O,{name:"Produits",apiURL:"/api/products",baseURL:"/products/",buttonText:"D\xe9tails",idField:"id",header:[{name:"Nom",apiKey:"name"},{name:"Nombre vendu",apiKey:"count"},{name:"Prix",apiKey:"price"}],defaultSort:{col:"count",sort:"desc"},floatingFilter:!0,filter:!0,sort:!0})})]})}}]),a}(d.a.Component),T=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={name:""},s}return Object(r.a)(a,[{key:"getName",value:function(){var e=this;fetch("/api/products/"+this.props.match.params.id+"/data",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({name:t.name})}),(function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.getName()}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("div",{className:"row mb-2 mb-xl-3",children:Object(j.jsx)("div",{className:"col-auto d-none d-sm-block",children:Object(j.jsx)("h3",{children:this.state.name})})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)(b,{apiURL:"/api/products/"+this.props.match.params.id+"/price",suffix:" \u20ac",name:"Prix",icon:"euro-sign",color:"green"}),Object(j.jsx)(b,{apiURL:"/api/products/"+this.props.match.params.id+"/quantity_sold",name:"Nombre vendu",icon:"cash-register",color:"yellow"})]}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)(C,{name:"Historique des ventes",apiURL:"/api/products/"+this.props.match.params.id+"/purchases"})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)(O,{bootstrapSubdiv:"col-12 col-sm-6",name:"Historique des ventes",apiURL:"/api/products/"+this.props.match.params.id+"/history",pageSize:10,header:[{name:"Surnom",apiKey:"customer"},{name:"Date",apiKey:"datetime"}]}),Object(j.jsx)(O,{bootstrapSubdiv:"col-12 col-sm-6",name:"Top consommateur",apiURL:"/api/products/"+this.props.match.params.id+"/top_customers",pageSize:10,header:[{name:"Surnom",apiKey:"customer"},{name:"Quantit\xe9",apiKey:"quantity"}]})]})]})}}]),a}(d.a.Component),E=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={},s}return Object(r.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"loadingContainer",children:Object(j.jsxs)("h2",{children:[Object(j.jsx)("i",{className:"fas fa-fw fa-sync-alt fa-spin"}),Object(j.jsxs)("span",{className:"align-middle",children:[" ",this.props.text]})]})})}}]),a}(d.a.Component),K=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={},s}return Object(r.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"loadingContainer",children:Object(j.jsxs)("h2",{children:[Object(j.jsx)("i",{className:"fas fa-fw fa-exclamation-triangle"}),Object(j.jsx)("span",{className:"align-middle",children:" Une erreur c'est produite lors de la derni\xe8re mise \xe0 jour !"})]})})}}]),a}(d.a.Component),P=a(7),A=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={},s}return Object(r.a)(a,[{key:"getRightPage",value:function(){return-1===this.props.serverStatus?Object(j.jsx)(E,{text:"Chargement"}):"0"===this.props.serverStatus?Object(j.jsxs)(P.d,{children:[Object(j.jsx)(P.b,{exact:!0,path:"/",component:w}),Object(j.jsx)(P.b,{exact:!0,path:"/clients",component:U}),Object(j.jsx)(P.b,{exact:!0,path:"/products",component:M}),Object(j.jsx)(P.b,{path:"/clients/:id",component:L}),Object(j.jsx)(P.b,{path:"/products/:id",component:T})]}):"1"===this.props.serverStatus?Object(j.jsx)(E,{text:"Mise \xe0 jour en cours. Veuillez patienter"}):Object(j.jsx)(K,{})}},{key:"render",value:function(){return Object(j.jsx)("div",{className:"content",children:this.getRightPage()})}}]),a}(d.a.Component),z=(a(62),a(17)),I=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={activeItemId:e.activeItemId,latestUpdate:"N/C"},s}return Object(r.a)(a,[{key:"getLatestUpdate",value:function(){var e=this;fetch("/api/update",{headers:{"Content-Type":"application/json",Accept:"application/plain-text"}}).then((function(e){return e.text()})).then((function(t){e.setState({latestUpdate:"0"===e.props.serverStatus?t:"N/C"})}),(function(e){}))}},{key:"update",value:function(){var e=this;fetch("/api/update",{method:"POST"}).then((function(t){e.props.updateCb(!0)}))}},{key:"componentDidMount",value:function(){this.getLatestUpdate()}},{key:"componentDidUpdate",value:function(e){e.serverStatus!==this.props.serverStatus&&this.getLatestUpdate()}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("nav",{id:"sidebar",className:"sidebar "+(this.props.collapsed?"collapsed":""),children:[Object(j.jsx)("div",{className:"sidebar-top"}),Object(j.jsx)("ul",{className:"sidebar-nav",children:this.props.items.map((function(t){return Object(j.jsx)("li",{className:"sidebar-item "+(t.link===e.props.location.pathname?"active":""),children:Object(j.jsxs)(z.b,{to:t.link,className:"sidebar-link",children:[Object(j.jsx)("i",{className:"fas fa-fw fa-"+t.icon}),Object(j.jsx)("span",{className:"align-middle",children:t.name})]})},t.id)}))}),Object(j.jsxs)("div",{className:"sidebar-footer",children:[Object(j.jsxs)("div",{className:"sidebar-footer-item",children:["Derni\xe8re mise \xe0 jour le ",Object(j.jsx)("br",{})," ",this.state.latestUpdate]}),Object(j.jsx)("div",{className:"sidebar-footer-item clickable",onClick:this.update.bind(this),children:"Mettre \xe0 jour"}),Object(j.jsx)("br",{}),Object(j.jsx)("div",{className:"sidebar-footer-item",children:"v1.0 - Pour le Baritech"}),Object(j.jsx)("br",{})]})]})}}]),a}(d.a.Component),F=Object(P.g)(I),H=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={},s}return Object(r.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{class:"main d-flex justify-content-center w-100",children:Object(j.jsx)("main",{class:"content d-flex p-0",children:Object(j.jsx)("div",{class:"container d-flex flex-column",children:Object(j.jsx)("div",{class:"row h-100",children:Object(j.jsx)("div",{class:"col-sm-10 col-md-8 col-lg-6 mx-auto d-table h-100",children:Object(j.jsx)("div",{class:"d-table-cell align-middle",children:Object(j.jsx)("div",{class:"card",children:Object(j.jsx)("div",{class:"card-body",children:Object(j.jsx)("div",{class:"m-sm-4",children:Object(j.jsxs)("form",{action:"http://localhost:5000/login",method:"post",children:[Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{children:"Nom d'utilisateur"}),Object(j.jsx)("input",{class:"form-control form-control-lg",type:"text",name:"username",placeholder:"Nom d'utilisateur"})]}),Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{children:"Mot de passe"}),Object(j.jsx)("input",{class:"form-control form-control-lg",type:"password",name:"password",placeholder:"Mot de passe"})]}),Object(j.jsx)("div",{class:"text-center mt-3",children:Object(j.jsx)("button",{class:"btn btn-lg btn-primary",children:"Se connecter"})})]})})})})})})})})})})}}]),a}(d.a.Component),q=(a(63),a(27)),G=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={auth:!1,validated:!1},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({validated:!1}),fetch("/dummy",{method:"POST"}).then((function(t){e.setState({auth:t.ok,validated:!0}),console.log(t.ok)})).catch((function(t){e.setState({auth:!1,validated:!0})}))}},{key:"render",value:function(){return this.state.validated?this.state.auth?Object(j.jsx)(P.b,Object(n.a)(Object(n.a)({},this.props.rest),{},{children:this.props.children})):Object(j.jsx)(P.b,Object(n.a)(Object(n.a)({},this.props.rest),{},{children:Object(j.jsx)(P.a,{to:"/login"})})):Object(j.jsx)(E,{})}}]),a}(d.a.Component),V=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).updateTimer=null,n.store=Object(q.b)(n.reducer),n.state={isSidebarCollapsed:!1,serverStatus:-1},n.handleSidebarToggle=n.handleSidebarToggle.bind(Object(s.a)(n)),n}return Object(r.a)(a,[{key:"reducer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{updateEvent:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE":return console.log(),{updateEvent:!e.updateEvent};default:return{updateEvent:e.updateEvent}}}},{key:"handleSidebarToggle",value:function(e){this.setState((function(e){return{isSidebarCollapsed:!e.isSidebarCollapsed}}))}},{key:"getStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return fetch("/api/status").then((function(e){return e.text()})).then((function(a){e.setState((function(e,t){return{serverStatus:a}})),"0"===a&&t&&e.store.dispatch({type:"UPDATE"}),"1"===a&&(e.updateTimer=setTimeout((function(){return e.getStatus(t)}),5e3))}),(function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.getStatus()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.updateTimer)}},{key:"render",value:function(){var e=this.state.isSidebarCollapsed;return Object(j.jsx)(z.a,{children:Object(j.jsx)(d.a.StrictMode,{children:Object(j.jsxs)(P.d,{children:[Object(j.jsx)(P.b,{path:"/login",children:Object(j.jsx)(H,{})}),Object(j.jsx)(G,{path:"/",children:Object(j.jsxs)(h.a,{store:this.store,children:[Object(j.jsx)(F,{collapsed:e,items:[{id:0,name:"Tableau de bord",icon:"home",link:"/"},{id:1,name:"Clients",icon:"users",link:"/clients"},{id:2,name:"Produits",icon:"beer",link:"/products"}],activeItemId:0,serverStatus:this.state.serverStatus,updateCb:this.getStatus.bind(this)}),Object(j.jsxs)("div",{className:"main",children:[Object(j.jsx)("nav",{className:"navbar",children:Object(j.jsx)("div",{className:"sidebar-toggle",children:Object(j.jsx)("i",{className:"fas fa-fw fa-bars hamburger",onClick:this.handleSidebarToggle})})}),Object(j.jsx)(A,{serverStatus:this.state.serverStatus})]})]})})]})})})}}]),a}(d.a.Component);p.a.render(Object(j.jsx)(V,{title:"Dashboard"}),document.getElementById("wrapper"))}},[[64,1,2]]]);
//# sourceMappingURL=main.423ce8e0.chunk.js.map