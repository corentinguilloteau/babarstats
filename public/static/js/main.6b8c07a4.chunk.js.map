{"version":3,"sources":["components/InformationCard.js","components/TableCard.js","components/TimeSerieCard.js","components/ProductPlotCard.js","components/Dashboard.js","components/Users.js","components/ConsoPlotCard.js","components/User.js","components/Drinks.js","components/Drink.js","components/Loading.js","components/LoadError.js","components/App.js","components/Sidebar.js","components/Login.js","index.js"],"names":["InformationCard","props","state","value","loaded","this","setState","fetch","apiURL","headers","Accept","then","res","text","result","error","getValue","prevProps","updateEvent","name","className","role","prefix","suffix","color","icon","React","Component","connect","TableCard","rowData","method","crossDomain","json","console","log","getData","params","baseURL","buttonText","href","id","availableWidth","api","gridPanel","eBodyViewport","clientWidth","columns","getAllDisplayedColumns","getWidthOfColsInList","sizeColumnsToFit","autosizeColumnsIfNeeded","window","onresize","defaultSort","columnApi","applyColumnState","colId","col","sort","defaultState","h","headerName","field","apiKey","sortable","filter","floatingFilter","cellRenderer","linkCellRender","bind","bootstrapSubdiv","onGridReady","pagination","paginationPageSize","pageSize","domLayout","suppressCellSelection","style","height","fullWidthCellRenderer","header","map","getColumn","idField","buttonCellRenderer","TimeSerieCard","data","layout","minHeight","width","config","responsive","ProductPlotCard","date","moment","format","rows","key","row","hist","hist_trace","x","unpack","y","yaxis","type","bargap","bargroupgap","showlegend","barmode","xaxis","autorange","range","getDate","length","subtract","rangeselector","buttons","count","label","step","stepmode","rangeslider","title","titlefont","tickfont","side","rawData","sub_total","current_date","timestamp","item","dayOfYear","year","push","display","processData","fetchData","Dashboard","Users","isLoaded","users","ConsoPlotCard","trace","mode","line","overlaying","yaxis2","total","User","surname","match","nickname","getName","Loading","LoadError","App","serverStatus","exact","path","component","Drinks","Drink","getRightPage","Sidebar","activeItemId","latestUpdate","self","updateCb","getLatestUpdate","collapsed","items","link","location","pathname","to","onClick","update","withRouter","Login","class","action","placeholder","PrivateRoute","auth","validated","ok","catch","err","rest","children","Main","updateTimer","store","createStore","reducer","isSidebarCollapsed","handleSidebarToggle","e","updating","prevState","dispatch","setTimeout","getStatus","clearTimeout","StrictMode","ReactDOM","render","document","getElementById"],"mappings":"oTAIMA,E,kDACL,WAAYC,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZC,MAAO,GACPC,QAAQ,GAJS,E,4CAQnB,WAAY,IAAD,OACVC,KAAKC,SAAS,CACbF,QAAQ,IAETG,MAAMF,KAAKJ,MAAMO,OAAQ,CACxBC,QAAS,CACR,eAAgB,mBAChBC,OAAQ,4BAGRC,MAAK,SAACC,GACN,OAAOA,EAAIC,UAEXF,MACA,SAACG,GACA,EAAKR,SAAS,CACbH,MAAOW,EACPV,QAAQ,OAMV,SAACW,S,+BAIJ,WACCV,KAAKW,a,gCAGN,SAAmBC,GACdZ,KAAKJ,MAAMiB,cAAgBD,EAAUC,aACxCb,KAAKW,a,oBAIP,WACC,OACC,qBACCG,KAAMd,KAAKJ,MAAMkB,KACjBC,UAAU,mCAFX,SAGC,qBAAKA,UAAU,OAAf,SACC,sBAAKA,UAAU,iBAAf,WACGf,KAAKH,MAAME,QACZ,qBAAKgB,UAAU,oBAAf,SACC,qBACCA,UAAU,8BACVC,KAAK,SAFN,SAGC,sBAAMD,UAAU,UAAhB,4BAIFf,KAAKH,MAAME,QACX,sBAAKgB,UAAU,QAAf,UACC,sBAAKA,UAAU,aAAf,UACC,oBAAIA,UAAU,OAAd,UACGf,KAAKJ,MAAMqB,QAAU,IACtBjB,KAAKH,MAAMC,OACVE,KAAKJ,MAAMsB,QAAU,MAExB,mBAAGH,UAAU,OAAb,SAAqBf,KAAKJ,MAAMkB,UAEjC,qBAAKC,UAAU,kBAAf,SACC,qBACCA,UACC,0DACAf,KAAKJ,MAAMuB,MAHb,SAKC,mBACCJ,UACC,gBACAf,KAAKJ,MAAMwB,yB,GAjFOC,IAAMC,WAoGrBC,eANS,SAAU1B,GACjC,MAAO,CACNgB,YAAahB,EAAMgB,eAINU,CAAyB5B,G,QC/FlC6B,G,8DACL,WAAY5B,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZE,QAAQ,EACR0B,QAAS,IAJQ,E,2CAQhB,WACC,IAAD,OACIzB,KAAKC,SAAS,CACnBF,QAAQ,IAETG,MAAMF,KAAKJ,MAAMO,OAAQ,CACxBuB,OAAQ,MACRC,aAAa,EACbvB,QAAS,CACR,eAAgB,sBAGhBE,MAAK,SAACC,GACN,OAAOA,EAAIqB,UAEXtB,MACA,SAACG,GACA,EAAKR,SAAS,CACbF,QAAQ,EACR0B,QAAShB,OAGX,SAACC,GACA,EAAKT,SAAS,CACbF,QAAQ,EACR0B,QAAS,KAEVI,QAAQC,IAAIpB,Q,+BAKhB,WACCV,KAAK+B,Y,gCAGH,SAAmBnB,GAEZZ,KAAKJ,MAAMiB,cAAgBD,EAAUC,aAEpCb,KAAK+B,Y,gCAIhB,SAAmBC,GAClB,MACC,oCACAhC,KAAKJ,MAAMqC,QACXD,EAAOlC,MACP,mBACAE,KAAKJ,MAAMsC,WACX,S,4BAIC,SAAeF,GAEX,MACL,YACAA,EAAOlC,MAAMqC,KACbH,EAAOlC,MAAMsC,GACb,MACAJ,EAAOlC,MAAMA,MACb,S,qCAIF,SAAwBkC,GACvB,IAAIK,EAAiBL,EAAOM,IAAIC,UAAUC,cAAcC,YACpDC,EAAUV,EAAOM,IAAP,2BAEZK,yBACcX,EAAOM,IAAP,2BAEdM,qBAAqBF,GAEPL,GACfL,EAAOM,IAAIO,qB,yBAIb,SAAYb,GAAS,IAAD,OACnBhC,KAAK8C,wBAAwBd,GAC7Be,OAAOC,SAAW,WACjB,EAAKF,wBAAwBd,IAG1BhC,KAAKJ,MAAMqD,aACdjB,EAAOkB,UAAUC,iBAAiB,CACjCtD,MAAO,CACN,CACCuD,MAAOpD,KAAKJ,MAAMqD,YAAYI,IAC9BC,KAAMtD,KAAKJ,MAAMqD,YAAYK,OAG/BC,aAAc,CAAED,KAAM,U,uBAOtB,SAAUE,GAEN,OAAGA,EAAErB,KAEM,cAAC,eAAD,CACHsB,WAAYD,EAAE1C,KACd4C,MAAOF,EAAEG,OACTC,SAAU5D,KAAKJ,MAAM0D,OAAQ,EAC7BO,OAAQ7D,KAAKJ,MAAMiE,SAAU,EAC7BC,eACI9D,KAAKJ,MAAMkE,iBACX,EAEJC,aAAc/D,KAAKgE,eAAeC,KAAKjE,QAIpC,cAAC,eAAD,CACHyD,WAAYD,EAAE1C,KACd4C,MAAOF,EAAEG,OACTC,SAAU5D,KAAKJ,MAAM0D,OAAQ,EAC7BO,OAAQ7D,KAAKJ,MAAMiE,SAAU,EAC7BC,eACI9D,KAAKJ,MAAMkE,iBACX,M,oBAKnB,WAAU,IAAD,OACR,OACC,qBAAK/C,UAAW,SAAWf,KAAKJ,MAAMsE,gBAAtC,SACC,sBAAKnD,UAAU,OAAf,UACC,qBAAKA,UAAU,cAAf,SACC,qBAAIA,UAAU,iBAAd,cAAiCf,KAAKJ,MAAMkB,KAA5C,UAECd,KAAKH,MAAME,QACZ,qBAAKgB,UAAU,iBAAf,SACC,qBAAKA,UAAU,oBAAf,SACC,qBACCA,UAAU,8BACVC,KAAK,SAFN,SAGC,sBAAMD,UAAU,UAAhB,8BAKHf,KAAKH,MAAME,QACX,qBAAKgB,UAAU,iBAAf,SACC,qBAAKA,UAAU,oBAAf,SACC,eAAC,cAAD,CACCU,QAASzB,KAAKH,MAAM4B,QACpB0C,YAAanE,KAAKmE,YAAYF,KAAKjE,MACnCoE,YAAY,EACZC,mBACCrE,KAAKJ,MAAM0E,UAAY,GAExBC,UAAW,aACXC,uBAAuB,EACvBC,MAAO,CACN,YAAa,OACbC,OAAQ,SAETC,sBACC,wBAdF,UAgBE3E,KAAKJ,MAAMgF,OAAOC,KAAI,SAACrB,GAAD,OACtB,EAAKsB,UAAUtB,MAEfxD,KAAKJ,MAAMsC,YACX,cAAC,eAAD,CACCuB,WAAW,GACXC,MAAO1D,KAAKJ,MAAMmF,QAClBhB,aAAc/D,KAAKgF,mBAAmBf,KACrCjE,wB,GAzLYqB,IAAMC,YA4MfC,eANS,SAAS1B,GAE7B,MAAO,CACHgB,YAAahB,EAAMgB,eAGZU,CAAyBC,G,0CC/JzByD,E,kDAjDd,WAAYrF,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZqF,KAAM,GACNC,OAAQ,IAJS,E,0CAQnB,WACC,OACC,qBACCrE,KAAMd,KAAKJ,MAAMkB,KACjBC,UAAW,SAAWf,KAAKJ,MAAMsE,gBAFlC,SAGC,sBAAKnD,UAAU,OAAf,UACC,qBAAKA,UAAU,cAAf,SACC,oBAAIA,UAAU,iBAAd,SAAgCf,KAAKJ,MAAMkB,UAG1Cd,KAAKJ,MAAMG,QACZ,qBAAKgB,UAAU,iBAAf,SACC,qBAAKA,UAAU,oBAAf,SACC,qBACCA,UAAU,8BACVC,KAAK,SAFN,SAGC,sBAAMD,UAAU,UAAhB,8BAKHf,KAAKJ,MAAMG,QACX,sBAAKgB,UAAU,iBAAf,UACC,cAAC,IAAD,CACC0D,MAAO,CACNC,OAAQ,OACRU,UAAW,OACXC,MAAO,QAERH,KAAMlF,KAAKJ,MAAMsF,KACjBC,OAAQnF,KAAKJ,MAAMuF,OACnBG,OAAQ,CAAEC,YAAY,KACpB,gB,GAzCkBlE,IAAMC,WCE5BkE,E,kDACL,WAAY5F,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZqF,KAAM,GACNC,OAAQ,GACRpF,QAAQ,GALS,E,2CASnB,SAAQ0F,GACP,OAAOC,IAAOD,GAAME,OAAO,gB,oBAG5B,SAAOC,EAAMC,GACZ,OAAOD,EAAKf,KAAI,SAAUiB,GACzB,OAAOA,EAAID,Q,qBAIb,SAAQE,GACP,IAAIC,EAAa,CAChBC,EAAGjG,KAAKkG,OAAOH,EAAM,KACrBI,EAAGnG,KAAKkG,OAAOH,EAAM,KACrBjF,KAAM,+BACNsF,MAAO,KACPC,KAAM,OAGHlB,EAAS,CACZmB,OAAQ,GACRC,YAAa,GACbC,YAAY,EACZC,QAAS,UACTC,MAAO,CACNC,WAAW,EACXC,MAAO,CACN5G,KAAK6G,QACJnB,IAAOK,EAAKA,EAAKe,OAAS,GAAGb,GAC3Bc,SAAS,EAAG,UACZpB,OAAO,eAEV3F,KAAK6G,QAAQd,EAAKA,EAAKe,OAAS,GAAGb,IAEpCe,cAAe,CACdC,QAAS,CACR,CACCC,MAAO,EACPC,MAAO,SACPC,KAAM,QACNC,SAAU,YAEX,CACCH,MAAO,EACPC,MAAO,SACPC,KAAM,QACNC,SAAU,YAEX,CAAED,KAAM,MAAOD,MAAO,UAGxBG,YAAa,CACZV,MAAO,CACN5G,KAAK6G,QAAQd,EAAK,GAAGE,GACrBjG,KAAK6G,QAAQd,EAAKA,EAAKe,OAAS,GAAGb,KAGrCI,KAAM,QAEPD,MAAO,CACNmB,MAAO,uBACPC,UAAW,CAAErG,MAAO,qBACpBsG,SAAU,CAAEtG,MAAO,qBACnBuG,KAAM,UAIR1H,KAAKC,SAAS,CACbkF,OAAQA,EACRD,KAAM,CAACc,GACPjG,QAAQ,M,yBAIV,SAAY4H,GACX,IADoB,EAChB5B,EAAO,GAEP6B,EAAY,EAEZC,EAAenC,IAAOiC,EAAQ,GAAGG,WALjB,cAOHH,GAPG,IAOpB,2BAA0B,CAAC,IAAlBI,EAAiB,QACrBtC,EAAOC,IAAOqC,EAAKD,WACvBrC,EAAKsB,SAAS,EAAG,SAGhBtB,EAAKuC,cAAgBH,EAAaG,aAClCvC,EAAKwC,SAAWJ,EAAaI,QAE7BlC,EAAKmC,KAAK,CACTjC,EAAG4B,EAAalC,OAAO,cAAgB,YACvCQ,EAAGyB,IAEJC,EAAepC,EACfmC,EAAY,EACZA,KAEAA,KAvBkB,8BA2BpB7B,EAAKmC,KAAK,CACTjC,EAAG4B,EAAalC,OAAO,cAAgB,YACvCQ,EAAGyB,IAGJ5H,KAAKmI,QAAQpC,K,uBAGd,WAAa,IAAD,OACX/F,KAAKC,SAAS,CACbF,QAAQ,IAETG,MAAMF,KAAKJ,MAAMO,OAAQ,CACxBC,QAAS,CACR,eAAgB,mBAChBC,OAAQ,sBAGRC,MAAK,SAACC,GACN,OAAOA,EAAIqB,UAEXtB,MACA,SAACG,GACA,EAAK2H,YAAY3H,MAKlB,SAACC,GACAmB,QAAQC,IAAIpB,Q,gCAKhB,SAAmBE,GACdZ,KAAKJ,MAAMiB,cAAgBD,EAAUC,aACxCb,KAAKqI,c,+BAIP,WACCrI,KAAKqI,c,oBAGN,WACC,OACC,cAAC,EAAD,CACCnE,gBAAiBlE,KAAKJ,MAAMsE,iBAAmB,aAC/CiB,OAAQnF,KAAKH,MAAMsF,OACnBD,KAAMlF,KAAKH,MAAMqF,KACjBpE,KAAMd,KAAKJ,MAAMkB,KACjBf,OAAQC,KAAKH,MAAME,a,GAlKOsB,IAAMC,WA8KrBC,eANS,SAAU1B,GACjC,MAAO,CACNgB,YAAahB,EAAMgB,eAINU,CAAyBiE,GC7GzB8C,E,kDAhEd,WAAY1I,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,GAFK,E,0CAKnB,WACC,OACC,sBAAKkB,UAAU,kBAAf,UACC,qBAAKA,UAAU,mBAAf,SACC,qBAAKA,UAAU,6BAAf,SACC,+CAGF,sBAAKA,UAAU,MAAf,UACC,cAAC,EAAD,CACCZ,OACC,6BAEDW,KAAK,iBACLM,KAAK,YACLD,MAAM,QACYD,OAAO,YAEX,cAAC,EAAD,CACdf,OACC,6BAEDW,KAAK,+BACLM,KAAK,OACLD,MAAM,WAEQ,cAAC,EAAD,CACdhB,OACC,iCAEDW,KAAK,wBACLM,KAAK,OACLD,MAAM,cAGR,sBAAKJ,UAAU,MAAf,UACgB,cAAC,EAAD,CAAiBD,KAAK,wBAAwBX,OAC3D,iBAEiB+D,gBAAiB,2BACpC,cAAC,EAAD,CACCA,gBAAgB,yBAChBpD,KAAK,sBACLX,OACC,yBAEDmE,SAAU,GACVM,OAAQ,CACP,CAAE9D,KAAM,SAAU6C,OAAQ,WAAYxB,MAAM,GAC5C,CAAErB,KAAM,UAAW6C,OAAQ,UAAWxB,MAAM,GAC5C,CAAErB,KAAM,OAAQ6C,OAAQ,qB,GAxDPtC,IAAMC,WC8BfiH,E,kDA/BX,WAAY3I,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,CACX2I,UAAU,EACVC,MAAO,IAJM,E,0CAQnB,WACE,OACE,sBAAK1H,UAAU,kBAAf,UACI,qBAAKA,UAAU,mBAAf,SACI,qBAAKA,UAAU,6BAAf,SACI,6BAAK,gBAGb,qBAAKA,UAAU,MAAf,SACI,cAAC,EAAD,CAAWmD,gBAAgB,MAAMpD,KAAK,UAAUX,OAAO,eAAe8B,QAAQ,YAAYC,WAAW,YAAY6C,QAAQ,KAAKH,OAC1H,CACI,CAAE9D,KAAM,SAAU6C,OAAQ,WAC1B,CAAE7C,KAAM,wBAAmB6C,OAAQ,SACnC,CAAE7C,KAAM,YAAa6C,OAAQ,QAC7B,CAAE7C,KAAM,SAAU6C,OAAQ,WAEhCG,gBAAgB,EAAMD,QAAQ,EAAMP,MAAM,a,GAzBxCjC,IAAMC,WCEpBoH,E,kDACL,WAAY9I,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZqF,KAAM,GACNC,OAAQ,GACRpF,QAAQ,GALS,E,2CASnB,SAAQ0F,GACP,OAAOC,IAAOD,GAAME,OAAO,gB,oBAG5B,SAAOC,EAAMC,GACZ,OAAOD,EAAKf,KAAI,SAAUiB,GACzB,OAAOA,EAAID,Q,qBAIb,SAAQX,EAAMa,GACb,IAAI4C,EAAQ,CACXtC,KAAM,UACNuC,KAAM,QACN9H,KAAM,QACNmF,EAAGjG,KAAKkG,OAAOhB,EAAM,KACrBiB,EAAGnG,KAAKkG,OAAOhB,EAAM,KACrB2D,KAAM,CAAE1H,MAAO,YAGZ6E,EAAa,CAChBC,EAAGjG,KAAKkG,OAAOH,EAAM,KACrBI,EAAGnG,KAAKkG,OAAOH,EAAM,KACrBjF,KAAM,+BACNsF,MAAO,KACPC,KAAM,OAGHlB,EAAS,CACZmB,OAAQ,GACRC,YAAa,GACbC,YAAY,EACZC,QAAS,UACTC,MAAO,CACNC,WAAW,EACXC,MAAO,CACN5G,KAAK6G,QACJnB,IAAOR,EAAKA,EAAK4B,OAAS,GAAGb,GAC3Bc,SAAS,EAAG,UACZpB,OAAO,eAEV3F,KAAK6G,QAAQ3B,EAAKA,EAAK4B,OAAS,GAAGb,IAEpCe,cAAe,CACdC,QAAS,CACR,CACCC,MAAO,EACPC,MAAO,SACPC,KAAM,QACNC,SAAU,YAEX,CACCH,MAAO,EACPC,MAAO,SACPC,KAAM,QACNC,SAAU,YAEX,CAAED,KAAM,MAAOD,MAAO,UAGxBG,YAAa,CACZV,MAAO,CACN5G,KAAK6G,QAAQ3B,EAAK,GAAGe,GACrBjG,KAAK6G,QAAQ3B,EAAKA,EAAK4B,OAAS,GAAGb,KAGrCI,KAAM,QAEPD,MAAO,CACNmB,MAAO,qBACPZ,WAAW,EACXN,KAAM,SACNyC,WAAY,MAEbC,OAAQ,CACPxB,MAAO,yBACPC,UAAW,CAAErG,MAAO,qBACpBsG,SAAU,CAAEtG,MAAO,qBACnBuG,KAAM,UAIR1H,KAAKC,SAAS,CACbkF,OAAQA,EACRD,KAAM,CAACyD,EAAO3C,GACdjG,QAAQ,M,yBAIV,SAAY4H,GACX,IADoB,EAChBzC,EAAO,GACPa,EAAO,GAEPiD,EAAQ,EACRpB,EAAY,EAEZC,EAAenC,IAAOiC,EAAQ,GAAGG,WAPjB,cASHH,GATG,IASpB,2BAA0B,CAAC,IAAlBI,EAAiB,QACzBiB,IAEA9D,EAAKgD,KAAK,CACTjC,EAAGP,IAAOqC,EAAKD,WAAWnC,OAAO,uBACjCQ,EAAG6C,IAGJ,IAAIvD,EAAOC,IAAOqC,EAAKD,WACvBrC,EAAKsB,SAAS,EAAG,SAGhBtB,EAAKuC,cAAgBH,EAAaG,aAClCvC,EAAKwC,SAAWJ,EAAaI,QAE7BlC,EAAKmC,KAAK,CACTjC,EAAG4B,EAAalC,OAAO,cAAgB,YACvCQ,EAAGyB,IAEJC,EAAepC,EACfmC,EAAY,EACZA,KAEAA,KAhCkB,8BAoCpB7B,EAAKmC,KAAK,CACTjC,EAAG4B,EAAalC,OAAO,cAAgB,YACvCQ,EAAGyB,IAGJ5H,KAAKmI,QAAQjD,EAAMa,K,uBAGpB,WAAa,IAAD,OACX/F,KAAKC,SAAS,CACbF,QAAQ,IAETG,MAAMF,KAAKJ,MAAMO,OAAQ,CACxBC,QAAS,CACR,eAAgB,mBAChBC,OAAQ,sBAGRC,MAAK,SAACC,GACN,OAAOA,EAAIqB,UAEXtB,MACA,SAACG,GACA,EAAK2H,YAAY3H,MAKlB,SAACC,GACAmB,QAAQC,IAAIpB,Q,gCAKhB,SAAmBE,GACdZ,KAAKJ,MAAMiB,cAAgBD,EAAUC,aACxCb,KAAKqI,c,+BAIP,WACCrI,KAAKqI,c,oBAGN,WACC,OACC,cAAC,EAAD,CACClD,OAAQnF,KAAKH,MAAMsF,OACnBD,KAAMlF,KAAKH,MAAMqF,KACjBpE,KAAMd,KAAKJ,MAAMkB,KACjBf,OAAQC,KAAKH,MAAME,a,GAzLKsB,IAAMC,WAqMnBC,eANS,SAAU1B,GACjC,MAAO,CACNgB,YAAahB,EAAMgB,eAINU,CAAyBmH,GCpFzBO,E,kDAhHd,WAAYrJ,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZqJ,QAAS,IAHQ,E,2CAOnB,WAAW,IAAD,OACThJ,MACC,gBACCF,KAAKJ,MAAMuJ,MAAMnH,OAAOI,GACxB,UACD,CACChC,QAAS,CACR,eAAgB,mBAChBC,OAAQ,sBAITC,MAAK,SAACC,GACN,OAAOA,EAAIqB,UAEXtB,MACA,SAACG,GACA,EAAKR,SAAS,CACbiJ,QAASzI,EAAO2I,cAMlB,SAAC1I,GACemB,QAAQC,IAAIpB,Q,+BAK/B,WACCV,KAAKqJ,Y,oBAGN,WACC,OACC,sBAAKtI,UAAU,kBAAf,UACC,qBAAKA,UAAU,mBAAf,SACC,qBAAKA,UAAU,6BAAf,SACC,6BAAKf,KAAKH,MAAMqJ,cAGlB,sBAAKnI,UAAU,MAAf,UACC,cAAC,EAAD,CACCZ,OACC,gBACAH,KAAKJ,MAAMuJ,MAAMnH,OAAOI,GACxB,SAEDlB,OAAO,UACPJ,KAAK,wBACLM,KAAK,YACaD,MAAM,UAEzB,cAAC,EAAD,CACChB,OACC,gBACAH,KAAKJ,MAAMuJ,MAAMnH,OAAOI,GACxB,cAEDnB,OAAO,IACPH,KAAK,mBACLM,KAAK,QACaD,MAAM,WAEzB,cAAC,EAAD,CACChB,OACC,gBACAH,KAAKJ,MAAMuJ,MAAMnH,OAAOI,GACxB,cAEDnB,OAAO,IACPH,KAAK,2BACLM,KAAK,SACaD,MAAM,cAGd,qBAAKJ,UAAU,MAAf,SACI,cAAC,EAAD,CAAeD,KAAK,aAAaX,OAC9C,gBACAH,KAAKJ,MAAMuJ,MAAMnH,OAAOI,GACxB,iBAGS,sBAAKrB,UAAU,MAAf,UACI,cAAC,EAAD,CAAWmD,gBAAgB,kBAAkBpD,KAAK,aAAaX,OAAS,gBACrFH,KAAKJ,MAAMuJ,MAAMnH,OAAOI,GAAK,WAAYkC,SAAU,GAAIM,OACtC,CACI,CAAE9D,KAAM,UAAW6C,OAAQ,UAAWxB,MAAM,GAC5C,CAAErB,KAAM,OAAQ6C,OAAQ,eAGhC,cAAC,EAAD,CAAWO,gBAAgB,kBAAkBpD,KAAK,mBAAmBX,OAAS,gBAC3FH,KAAKJ,MAAMuJ,MAAMnH,OAAOI,GAAK,gBAAiBkC,SAAU,GAAIM,OAC3C,CACI,CAAE9D,KAAM,UAAW6C,OAAQ,UAAWxB,MAAM,GAC5C,CAAErB,KAAM,cAAY6C,OAAQ,yB,GAxGrCtC,IAAMC,WC8BViH,E,kDA/BX,WAAY3I,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,CACX2I,UAAU,EACVC,MAAO,IAJM,E,0CAQnB,WACE,OACE,sBAAK1H,UAAU,kBAAf,UACI,qBAAKA,UAAU,mBAAf,SACI,qBAAKA,UAAU,6BAAf,SACI,6BAAK,iBAGb,qBAAKA,UAAU,MAAf,SACI,cAAC,EAAD,CAAWD,KAAK,WAAWX,OAAO,gBAAgB8B,QAAQ,aAAaC,WAAW,aAAU6C,QAAQ,KAAKH,OACrG,CACI,CAAE9D,KAAM,MAAO6C,OAAQ,QACvB,CAAE7C,KAAM,eAAgB6C,OAAQ,SAChC,CAAE7C,KAAM,OAAQ6C,OAAQ,UAGhCV,YAAa,CAAEI,IAAK,QAASC,KAAM,QAAUQ,gBAAgB,EAAMD,QAAQ,EAAMP,MAAM,a,GAzBnFjC,IAAMC,WCuGX2H,E,kDApGd,WAAYrJ,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZiB,KAAM,IAHW,E,2CAOnB,WAAW,IAAD,OACTZ,MACC,iBACCF,KAAKJ,MAAMuJ,MAAMnH,OAAOI,GACxB,QACD,CACChC,QAAS,CACR,eAAgB,mBAChBC,OAAQ,sBAITC,MAAK,SAACC,GACN,OAAOA,EAAIqB,UAEXtB,MACA,SAACG,GACA,EAAKR,SAAS,CACba,KAAML,EAAOK,UAMf,SAACJ,GACemB,QAAQC,IAAIpB,Q,+BAK/B,WACCV,KAAKqJ,Y,oBAGN,WACC,OACC,sBAAKtI,UAAU,kBAAf,UACC,qBAAKA,UAAU,mBAAf,SACC,qBAAKA,UAAU,6BAAf,SACC,6BAAKf,KAAKH,MAAMiB,WAGlB,sBAAKC,UAAU,MAAf,UACC,cAAC,EAAD,CACCZ,OACC,iBACAH,KAAKJ,MAAMuJ,MAAMnH,OAAOI,GACxB,SAEDlB,OAAO,UACPJ,KAAK,OACLM,KAAK,YACaD,MAAM,UAEzB,cAAC,EAAD,CACChB,OACC,iBACAH,KAAKJ,MAAMuJ,MAAMnH,OAAOI,GACxB,iBAEDtB,KAAK,eACLM,KAAK,gBACaD,MAAM,cAGd,qBAAKJ,UAAU,MAAf,SACI,cAAC,EAAD,CAAiBD,KAAK,wBAAwBX,OAC3D,iBACAH,KAAKJ,MAAMuJ,MAAMnH,OAAOI,GACxB,iBAGS,sBAAKrB,UAAU,MAAf,UACI,cAAC,EAAD,CAAWmD,gBAAgB,kBAAkBpD,KAAK,wBAAwBX,OAAS,iBAChGH,KAAKJ,MAAMuJ,MAAMnH,OAAOI,GAAK,WAAYkC,SAAU,GAAIM,OACtC,CACI,CAAE9D,KAAM,SAAU6C,OAAQ,WAAYxB,MAAM,GAC5C,CAAErB,KAAM,OAAQ6C,OAAQ,eAGhC,cAAC,EAAD,CAAWO,gBAAgB,kBAAkBpD,KAAK,mBAAmBX,OAAS,iBAC3FH,KAAKJ,MAAMuJ,MAAMnH,OAAOI,GAAK,iBAAkBkC,SAAU,GAAIM,OAC5C,CACI,CAAE9D,KAAM,SAAU6C,OAAQ,WAAYxB,MAAM,GAC5C,CAAErB,KAAM,cAAY6C,OAAQ,yB,GA5FrCtC,IAAMC,WCgBVgI,E,kDAlBX,WAAY1J,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,GAFE,E,0CAMnB,WACE,OACI,qBAAKkB,UAAU,mBAAf,SACE,+BACI,mBAAGA,UAAW,kCACd,uBAAMA,UAAU,eAAhB,cAAiCf,KAAKJ,MAAMY,iB,GAZtCa,IAAMC,WCmBbiI,E,kDAlBX,WAAY3J,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,GAFE,E,0CAMnB,WACE,OACI,qBAAKkB,UAAU,mBAAf,SACE,+BACI,mBAAGA,UAAW,sCACd,sBAAMA,UAAU,eAAhB,yF,GAZQM,IAAMC,W,OCyCfkI,E,kDAhCd,WAAY5J,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,GAFK,E,gDAKnB,WACC,OAAiC,IAA7BG,KAAKJ,MAAM6J,aACP,cAAC,EAAD,CAASjJ,KAAM,eAES,MAA5BR,KAAKJ,MAAM6J,aAEb,eAAC,IAAD,WACC,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,UAAWtB,IACjC,cAAC,IAAD,CAAOoB,OAAK,EAACC,KAAK,WAAWC,UAAWrB,IACxC,cAAC,IAAD,CAAOmB,OAAK,EAACC,KAAK,YAAYC,UAAWC,IACzC,cAAC,IAAD,CAAOF,KAAK,eAAeC,UAAWX,IACtC,cAAC,IAAD,CAAOU,KAAK,gBAAgBC,UAAWE,OAGH,MAA5B9J,KAAKJ,MAAM6J,aAEpB,cAAC,EAAD,CACCjJ,KAAM,gDAEG,cAAC,EAAD,M,oBAGb,WACC,OAAO,qBAAKO,UAAU,UAAf,SAA0Bf,KAAK+J,qB,GA7BtB1I,IAAMC,W,gBCLlB0I,E,kDAOL,WAAYpK,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZoK,aAAcrK,EAAMqK,aACpBC,aAAc,OAJG,E,mDAQnB,WAAmB,IAAD,OACjBhK,MAAM,cAAe,CACpBE,QAAS,CACR,eAAgB,mBAChBC,OAAQ,4BAGRC,MAAK,SAACC,GACN,OAAOA,EAAIC,UAEXF,MACA,SAACG,GACA,EAAKR,SAAS,CACbiK,aAC6B,MAA5B,EAAKtK,MAAM6J,aAAuBhJ,EAAS,WAM9C,SAACC,S,oBAIJ,WACC,IAAIyJ,EAAOnK,KACXE,MAAM,cAAe,CAAEwB,OAAQ,SAAUpB,MACxC,SAACC,GACA4J,EAAKvK,MAAMwK,UAAS,Q,+BAKvB,WACCpK,KAAKqK,oB,gCAGN,SAAmBzJ,GACdA,EAAU6I,eAAiBzJ,KAAKJ,MAAM6J,cACzCzJ,KAAKqK,oB,oBAIP,WAAU,IAAD,OACR,OACC,sBACCjI,GAAG,UACHrB,UACC,YAAcf,KAAKJ,MAAM0K,UAAY,YAAc,IAHrD,UAKC,qBAAKvJ,UAAU,gBACf,oBAAIA,UAAU,cAAd,SACEf,KAAKJ,MAAM2K,MAAM1F,KAAI,SAACkD,GAAD,OACrB,oBAEChH,UACC,iBACCgH,EAAKyC,OAAS,EAAK5K,MAAM6K,SAASC,SAChC,SACA,IANL,SAQC,eAAC,IAAD,CAAMC,GAAI5C,EAAKyC,KAAMzJ,UAAU,eAA/B,UACC,mBAAGA,UAAW,gBAAkBgH,EAAK3G,OACrC,sBAAML,UAAU,eAAhB,SACEgH,EAAKjH,WAVHiH,EAAK3F,SAgBb,sBAAKrB,UAAU,iBAAf,UACC,sBAAKA,UAAU,sBAAf,2CACyB,uBADzB,IACiCf,KAAKH,MAAMqK,gBAE5C,qBACCnJ,UAAU,gCACV6J,QAAS5K,KAAK6K,OAAO5G,KAAKjE,MAF3B,8BAKA,uBACA,qBAAKe,UAAU,sBAAf,qCAGA,iC,GAlGiBM,IAAMC,WAyGbwJ,cAAWd,GCnDXe,E,kDAvDd,WAAYnL,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,GAFK,E,0CAKnB,WACC,OACC,qBAAKmL,MAAM,2CAAX,SACC,sBAAMA,MAAM,qBAAZ,SACC,qBAAKA,MAAM,+BAAX,SACC,qBAAKA,MAAM,YAAX,SACC,qBAAKA,MAAM,oDAAX,SACC,qBAAKA,MAAM,4BAAX,SACC,qBAAKA,MAAM,OAAX,SACC,qBAAKA,MAAM,YAAX,SACC,qBAAKA,MAAM,SAAX,SACC,uBAAMC,OAAO,SAASvJ,OAAO,OAA7B,UACC,sBAAKsJ,MAAM,aAAX,UACC,sDACA,uBACCA,MAAM,+BACN3E,KAAK,OACLvF,KAAK,WACLoK,YAAY,yBAGd,sBAAKF,MAAM,aAAX,UACC,iDACA,uBACCA,MAAM,+BACN3E,KAAK,WACLvF,KAAK,WACLoK,YAAY,oBAGd,qBAAKF,MAAM,mBAAX,SACC,wBACCA,MAAM,yBADP,qD,GArCM3J,IAAMC,W,gBCSpB6J,E,kDAEF,WAAYvL,GAAQ,IAAD,8BACrB,cAAMA,IAEDC,MAAQ,CACZuL,MAAM,EACGC,WAAW,GALA,E,qDASnB,WAAoB,IAAD,OACfrL,KAAKC,SAAS,CAAEoL,WAAW,IAC3BnL,MAAM,SAAU,CACdwB,OAAQ,SAETpB,MAAK,SAACC,GACL,EAAKN,SAAS,CAAEmL,KAAM7K,EAAI+K,GAAGD,WAAW,IACxCxJ,QAAQC,IAAIvB,EAAI+K,OAEjBC,OAAM,SAACC,GACJ,EAAKvL,SAAS,CAAEmL,MAAM,EAAMC,WAAW,S,oBAI/C,WAEI,OAAIrL,KAAKH,MAAMwL,UAGZrL,KAAKH,MAAMuL,KAEF,cAAC,IAAD,2BAAYpL,KAAKJ,MAAM6L,MAAvB,aACHzL,KAAKJ,MAAM8L,YAKR,cAAC,IAAD,2BAAY1L,KAAKJ,MAAM6L,MAAvB,aACJ,cAAC,IAAD,CAAUd,GAAG,cAXV,cAAC,EAAD,Q,GA5BQtJ,IAAMC,WA6C3BqK,E,kDAGL,WAAY/L,GAAQ,IAAD,8BAClB,cAAMA,IAHPgM,YAAc,KAEK,EAuBnBC,MAAQC,YAAY,EAAKC,SApBxB,EAAKlM,MAAQ,CACZmM,oBAAoB,EACpBvC,cAAe,GAGhB,EAAKwC,oBAAsB,EAAKA,oBAAoBhI,KAAzB,gBART,E,2CAWnB,WAAgD,IAAxCpE,EAAuC,uDAA/B,CAAEgB,aAAa,GAAQoK,EAAQ,uCAC9C,OAAQA,EAAO5E,MACd,IAAK,SAEJ,OADAxE,QAAQC,MACD,CAAEjB,aAAchB,EAAMgB,aAC9B,QACC,MAAO,CACNA,YAAahB,EAAMgB,gB,iCAOvB,SAAoBqL,GACnBlM,KAAKC,UAAS,SAACJ,GAAD,MAAY,CACzBmM,oBAAqBnM,EAAMmM,yB,uBAI7B,WAA6B,IAAD,OAAlBG,EAAkB,wDAC3B,OAAOjM,MAAM,eACXI,MAAK,SAACC,GACN,OAAOA,EAAIC,UAEXF,MACA,SAACG,GACA,EAAKR,UAAS,SAACmM,EAAWxM,GAAZ,MAAuB,CACpC6J,aAAchJ,MAEA,MAAXA,GAAkB0L,GACrB,EAAKN,MAAMQ,SAAS,CAAEhG,KAAM,WAGd,MAAX5F,IACH,EAAKmL,YAAcU,YAClB,kBAAM,EAAKC,UAAUJ,KACrB,SAIH,SAACzL,GACAmB,QAAQC,IAAIpB,Q,+BAKhB,WACCV,KAAKuM,c,kCAGN,WACCC,aAAaxM,KAAK4L,e,oBAGnB,WACC,IAAMI,EAAqBhM,KAAKH,MAAMmM,mBACtC,OACC,cAAC,IAAD,UACC,cAAC,IAAMS,WAAP,UACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAO9C,KAAK,SAAZ,SACC,cAAC,EAAD,MAED,cAAC,EAAD,CAAcA,KAAK,IAAnB,SACC,eAAC,IAAD,CAAUkC,MAAO7L,KAAK6L,MAAtB,UACC,cAAC,EAAD,CACCvB,UAAW0B,EACXzB,MAAO,CACN,CACCnI,GAAI,EACJtB,KAAM,kBACNM,KAAM,OACNoJ,KAAM,KAEP,CACCpI,GAAI,EACJtB,KAAM,UACNM,KAAM,QACNoJ,KAAM,YAEP,CACCpI,GAAI,EACJtB,KAAM,WACNM,KAAM,OACNoJ,KAAM,cAGRP,aAAc,EACdR,aAAczJ,KAAKH,MAAM4J,aACzBW,SAAUpK,KAAKuM,UAAUtI,KAAKjE,QAE/B,sBAAKe,UAAU,OAAf,UACC,qBAAKA,UAAU,SAAf,SACC,qBAAKA,UAAU,iBAAf,SACC,mBACCA,UAAU,8BACV6J,QACC5K,KAAKiM,0BAIT,cAAC,EAAD,CACCxC,aAAczJ,KAAKH,MAAM4J,kC,GArHhBpI,IAAMC,WAiIzBoL,IAASC,OAAO,cAAC,EAAD,CAAMpF,MAAM,cAAgBqF,SAASC,eAAe,c","file":"static/js/main.6b8c07a4.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"../css/Card.css\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass InformationCard extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tvalue: \"\",\r\n\t\t\tloaded: false,\r\n\t\t};\r\n\t}\r\n\r\n\tgetValue() {\r\n\t\tthis.setState({\r\n\t\t\tloaded: false,\r\n\t\t});\r\n\t\tfetch(this.props.apiURL, {\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/plain-text\",\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.then((res) => {\r\n\t\t\t\treturn res.text();\r\n\t\t\t})\r\n\t\t\t.then(\r\n\t\t\t\t(result) => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tvalue: result,\r\n\t\t\t\t\t\tloaded: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t// Note: it's important to handle errors here\r\n\t\t\t\t// instead of a catch() block so that we don't swallow\r\n\t\t\t\t// exceptions from actual bugs in components.\r\n\t\t\t\t(error) => {}\r\n\t\t\t);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getValue();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (this.props.updateEvent !== prevProps.updateEvent) {\r\n\t\t\tthis.getValue();\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tname={this.props.name}\r\n\t\t\t\tclassName=\"col-12 col-sm-6 col-xxl-3 d-flex\">\r\n\t\t\t\t<div className=\"card\">\r\n\t\t\t\t\t<div className=\"card-body py-4\">\r\n\t\t\t\t\t\t{!this.state.loaded && (\r\n\t\t\t\t\t\t\t<div className=\"spinner-container\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"spinner-border text-primary\"\r\n\t\t\t\t\t\t\t\t\trole=\"status\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{this.state.loaded && (\r\n\t\t\t\t\t\t\t<div className=\"media\">\r\n\t\t\t\t\t\t\t\t<div className=\"media-body\">\r\n\t\t\t\t\t\t\t\t\t<h3 className=\"mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t{(this.props.prefix || \"\") +\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.value +\r\n\t\t\t\t\t\t\t\t\t\t\t(this.props.suffix || \"\")}\r\n\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t<p className=\"mb-2\">{this.props.name}</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"icon-block ml-3\">\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t\t\"round d-flex align-items-center justify-content-center \" +\r\n\t\t\t\t\t\t\t\t\t\t\tthis.props.color\r\n\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"fas fa-fw fa-\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.props.icon\r\n\t\t\t\t\t\t\t\t\t\t\t}></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = function (state) {\r\n\treturn {\r\n\t\tupdateEvent: state.updateEvent,\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps)(InformationCard);\r\n","import React from \"react\";\r\nimport \"../css/Card.css\";\r\n\r\nimport { AgGridColumn, AgGridReact } from \"ag-grid-react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport \"ag-grid-community/dist/styles/ag-grid.css\";\r\nimport \"ag-grid-community/dist/styles/ag-theme-material.css\";\r\n\r\nclass TableCard extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tloaded: false,\r\n\t\t\trowData: [],\r\n\t\t};\r\n\t}\r\n\r\n    getData()\r\n    {\r\n        this.setState({\r\n\t\t\tloaded: false,\r\n\t\t});\r\n\t\tfetch(this.props.apiURL, {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\tcrossDomain: true,\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.then((res) => {\r\n\t\t\t\treturn res.json();\r\n\t\t\t})\r\n\t\t\t.then(\r\n\t\t\t\t(result) => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloaded: true,\r\n\t\t\t\t\t\trowData: result,\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t(error) => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloaded: false,\r\n\t\t\t\t\t\trowData: [],\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\t\t\t);\r\n    }\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n    componentDidUpdate(prevProps)\r\n    {\r\n        if(this.props.updateEvent !== prevProps.updateEvent)\r\n        {\r\n            this.getData();\r\n        }\r\n    }\r\n\r\n\tbuttonCellRenderer(params) {\r\n\t\treturn (\r\n\t\t\t'<a class=\"btn btn-primary\" href=\"' +\r\n\t\t\tthis.props.baseURL +\r\n\t\t\tparams.value +\r\n\t\t\t'\" role=\"button\">' +\r\n\t\t\tthis.props.buttonText +\r\n\t\t\t\"</a>\"\r\n\t\t);\r\n\t}\r\n\r\n    linkCellRender(params)\r\n    {\r\n        return (\r\n\t\t\t'<a href=\"' +\r\n\t\t\tparams.value.href +\r\n\t\t\tparams.value.id +\r\n\t\t\t'/\">' +\r\n\t\t\tparams.value.value +\r\n\t\t\t\"</a>\"\r\n\t\t);\r\n    }\r\n\r\n\tautosizeColumnsIfNeeded(params) {\r\n\t\tlet availableWidth = params.api.gridPanel.eBodyViewport.clientWidth;\r\n\t\tlet columns = params.api[\"gridPanel\"][\r\n\t\t\t\"columnController\"\r\n\t\t].getAllDisplayedColumns();\r\n\t\tlet usedWidth = params.api[\"gridPanel\"][\r\n\t\t\t\"columnController\"\r\n\t\t].getWidthOfColsInList(columns);\r\n\r\n\t\tif (usedWidth < availableWidth) {\r\n\t\t\tparams.api.sizeColumnsToFit();\r\n\t\t}\r\n\t}\r\n\r\n\tonGridReady(params) {\r\n\t\tthis.autosizeColumnsIfNeeded(params);\r\n\t\twindow.onresize = () => {\r\n\t\t\tthis.autosizeColumnsIfNeeded(params);\r\n\t\t};\r\n\r\n\t\tif (this.props.defaultSort) {\r\n\t\t\tparams.columnApi.applyColumnState({\r\n\t\t\t\tstate: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolId: this.props.defaultSort.col,\r\n\t\t\t\t\t\tsort: this.props.defaultSort.sort,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tdefaultState: { sort: null },\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n    getColumn(h)\r\n    {\r\n        if(h.href)\r\n        {\r\n            return(<AgGridColumn\r\n                headerName={h.name}\r\n                field={h.apiKey}\r\n                sortable={this.props.sort || false}\r\n                filter={this.props.filter || false}\r\n                floatingFilter={\r\n                    this.props.floatingFilter ||\r\n                    false\r\n                }\r\n                cellRenderer={this.linkCellRender.bind(this)}></AgGridColumn>);\r\n        }\r\n        else\r\n        {\r\n            return(<AgGridColumn\r\n                headerName={h.name}\r\n                field={h.apiKey}\r\n                sortable={this.props.sort || false}\r\n                filter={this.props.filter || false}\r\n                floatingFilter={\r\n                    this.props.floatingFilter ||\r\n                    false\r\n                }></AgGridColumn>);\r\n        }\r\n    }\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={\"d-flex\" + this.props.bootstrapSubdiv}>\r\n\t\t\t\t<div className=\"card\">\r\n\t\t\t\t\t<div className=\"card-header\">\r\n\t\t\t\t\t\t<h5 className=\"car-title mt-2\"> {this.props.name} </h5>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{!this.state.loaded && (\r\n\t\t\t\t\t\t<div className=\"card-body py-4\">\r\n\t\t\t\t\t\t\t<div className=\"spinner-container\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"spinner-border text-primary\"\r\n\t\t\t\t\t\t\t\t\trole=\"status\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{this.state.loaded && (\r\n\t\t\t\t\t\t<div className=\"card-body py-2\">\r\n\t\t\t\t\t\t\t<div className=\"ag-theme-material\">\r\n\t\t\t\t\t\t\t\t<AgGridReact\r\n\t\t\t\t\t\t\t\t\trowData={this.state.rowData}\r\n\t\t\t\t\t\t\t\t\tonGridReady={this.onGridReady.bind(this)}\r\n\t\t\t\t\t\t\t\t\tpagination={true}\r\n\t\t\t\t\t\t\t\t\tpaginationPageSize={\r\n\t\t\t\t\t\t\t\t\t\tthis.props.pageSize || 30\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tdomLayout={\"autoHeight\"}\r\n\t\t\t\t\t\t\t\t\tsuppressCellSelection={true}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\"min-width\": \"100%\",\r\n\t\t\t\t\t\t\t\t\t\theight: \"100%;\",\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tfullWidthCellRenderer={\r\n\t\t\t\t\t\t\t\t\t\t\"fullWidthCellRenderer\"\r\n\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t{this.props.header.map((h) => (\r\n\t\t\t\t\t\t\t\t\t\tthis.getColumn(h)\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t{this.props.buttonText && (\r\n\t\t\t\t\t\t\t\t\t\t<AgGridColumn\r\n\t\t\t\t\t\t\t\t\t\t\theaderName=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\tfield={this.props.idField}\r\n\t\t\t\t\t\t\t\t\t\t\tcellRenderer={this.buttonCellRenderer.bind(\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis\r\n\t\t\t\t\t\t\t\t\t\t\t)}></AgGridColumn>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</AgGridReact>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = function(state){\r\n\r\n    return {\r\n        updateEvent: state.updateEvent\r\n  }};\r\n\r\nexport default connect(mapStateToProps)(TableCard);\r\n","import React from \"react\";\r\nimport \"../css/Card.css\";\r\nimport Plot from \"react-plotly.js\";\r\n\r\nclass TimeSerieCard extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tdata: [],\r\n\t\t\tlayout: {},\r\n\t\t};\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tname={this.props.name}\r\n\t\t\t\tclassName={\"d-flex\" + this.props.bootstrapSubdiv}>\r\n\t\t\t\t<div className=\"card\">\r\n\t\t\t\t\t<div className=\"card-header\">\r\n\t\t\t\t\t\t<h5 className=\"car-title mt-2\">{this.props.name}</h5>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{!this.props.loaded && (\r\n\t\t\t\t\t\t<div className=\"card-body py-4\">\r\n\t\t\t\t\t\t\t<div className=\"spinner-container\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"spinner-border text-primary\"\r\n\t\t\t\t\t\t\t\t\trole=\"status\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{this.props.loaded && (\r\n\t\t\t\t\t\t<div className=\"card-body py-2\">\r\n\t\t\t\t\t\t\t<Plot\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\theight: \"100%\",\r\n\t\t\t\t\t\t\t\t\tminHeight: \"40vw\",\r\n\t\t\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tdata={this.props.data}\r\n\t\t\t\t\t\t\t\tlayout={this.props.layout}\r\n\t\t\t\t\t\t\t\tconfig={{ responsive: true }}\r\n\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TimeSerieCard;\r\n","import React from \"react\";\r\nimport \"../css/Card.css\";\r\nimport moment from \"moment\";\r\nimport TimeSerieCard from \"./TimeSerieCard\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass ProductPlotCard extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tdata: [],\r\n\t\t\tlayout: {},\r\n\t\t\tloaded: false,\r\n\t\t};\r\n\t}\r\n\r\n\tgetDate(date) {\r\n\t\treturn moment(date).format(\"YYYY-MM-DD\");\r\n\t}\r\n\r\n\tunpack(rows, key) {\r\n\t\treturn rows.map(function (row) {\r\n\t\t\treturn row[key];\r\n\t\t});\r\n\t}\r\n\r\n\tdisplay(hist) {\r\n\t\tvar hist_trace = {\r\n\t\t\tx: this.unpack(hist, \"x\"),\r\n\t\t\ty: this.unpack(hist, \"y\"),\r\n\t\t\tname: \"Consommation journalières\",\r\n\t\t\tyaxis: \"y2\",\r\n\t\t\ttype: \"bar\",\r\n\t\t};\r\n\r\n\t\tvar layout = {\r\n\t\t\tbargap: 0.1,\r\n\t\t\tbargroupgap: 0.2,\r\n\t\t\tshowlegend: false,\r\n\t\t\tbarmode: \"overlay\",\r\n\t\t\txaxis: {\r\n\t\t\t\tautorange: true,\r\n\t\t\t\trange: [\r\n\t\t\t\t\tthis.getDate(\r\n\t\t\t\t\t\tmoment(hist[hist.length - 1].x)\r\n\t\t\t\t\t\t\t.subtract(1, \"months\")\r\n\t\t\t\t\t\t\t.format(\"YYYY-MM-DD\")\r\n\t\t\t\t\t),\r\n\t\t\t\t\tthis.getDate(hist[hist.length - 1].x),\r\n\t\t\t\t],\r\n\t\t\t\trangeselector: {\r\n\t\t\t\t\tbuttons: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t\t\tlabel: \"1 mois\",\r\n\t\t\t\t\t\t\tstep: \"month\",\r\n\t\t\t\t\t\t\tstepmode: \"backward\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcount: 6,\r\n\t\t\t\t\t\t\tlabel: \"6 mois\",\r\n\t\t\t\t\t\t\tstep: \"month\",\r\n\t\t\t\t\t\t\tstepmode: \"backward\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ step: \"all\", label: \"Tout\" },\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t\trangeslider: {\r\n\t\t\t\t\trange: [\r\n\t\t\t\t\t\tthis.getDate(hist[0].x),\r\n\t\t\t\t\t\tthis.getDate(hist[hist.length - 1].x),\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t\ttype: \"date\",\r\n\t\t\t},\r\n\t\t\tyaxis: {\r\n\t\t\t\ttitle: \"Vente journalière\",\r\n\t\t\t\ttitlefont: { color: \"rgb(255, 127, 14)\" },\r\n\t\t\t\ttickfont: { color: \"rgb(255, 127, 14)\" },\r\n\t\t\t\tside: \"right\",\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tthis.setState({\r\n\t\t\tlayout: layout,\r\n\t\t\tdata: [hist_trace],\r\n\t\t\tloaded: true,\r\n\t\t});\r\n\t}\r\n\r\n\tprocessData(rawData) {\r\n\t\tvar hist = [];\r\n\r\n\t\tvar sub_total = 0;\r\n\r\n\t\tvar current_date = moment(rawData[0].timestamp);\r\n\r\n\t\tfor (var item of rawData) {\r\n\t\t\tvar date = moment(item.timestamp);\r\n\t\t\tdate.subtract(6, \"hours\");\r\n\r\n\t\t\tif (\r\n\t\t\t\tdate.dayOfYear() !== current_date.dayOfYear() ||\r\n\t\t\t\tdate.year() !== current_date.year()\r\n\t\t\t) {\r\n\t\t\t\thist.push({\r\n\t\t\t\t\tx: current_date.format(\"YYYY-MM-DD\") + \" 00:00:00\",\r\n\t\t\t\t\ty: sub_total,\r\n\t\t\t\t});\r\n\t\t\t\tcurrent_date = date;\r\n\t\t\t\tsub_total = 0;\r\n\t\t\t\tsub_total++;\r\n\t\t\t} else {\r\n\t\t\t\tsub_total++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thist.push({\r\n\t\t\tx: current_date.format(\"YYYY-MM-DD\") + \" 00:00:00\",\r\n\t\t\ty: sub_total,\r\n\t\t});\r\n\r\n\t\tthis.display(hist);\r\n\t}\r\n\r\n\tfetchData() {\r\n\t\tthis.setState({\r\n\t\t\tloaded: false,\r\n\t\t});\r\n\t\tfetch(this.props.apiURL, {\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.then((res) => {\r\n\t\t\t\treturn res.json();\r\n\t\t\t})\r\n\t\t\t.then(\r\n\t\t\t\t(result) => {\r\n\t\t\t\t\tthis.processData(result);\r\n\t\t\t\t},\r\n\t\t\t\t// Note: it's important to handle errors here\r\n\t\t\t\t// instead of a catch() block so that we don't swallow\r\n\t\t\t\t// exceptions from actual bugs in components.\r\n\t\t\t\t(error) => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (this.props.updateEvent !== prevProps.updateEvent) {\r\n\t\t\tthis.fetchData();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.fetchData();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<TimeSerieCard\r\n\t\t\t\tbootstrapSubdiv={this.props.bootstrapSubdiv || \"col d-flex\"}\r\n\t\t\t\tlayout={this.state.layout}\r\n\t\t\t\tdata={this.state.data}\r\n\t\t\t\tname={this.props.name}\r\n\t\t\t\tloaded={this.state.loaded}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = function (state) {\r\n\treturn {\r\n\t\tupdateEvent: state.updateEvent,\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps)(ProductPlotCard);\r\n","import React from \"react\";\r\nimport InformationCard from \"./InformationCard\";\r\nimport TableCard from \"./TableCard\";\r\nimport \"../css/App.css\";\r\nimport ProductPlotCard from './ProductPlotCard'\r\n\r\nclass Dashboard extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t<div className=\"row mb-2 mb-xl-3\">\r\n\t\t\t\t\t<div className=\"col-auto d-none d-sm-block\">\r\n\t\t\t\t\t\t<h3>Dashboard</h3>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<InformationCard\r\n\t\t\t\t\t\tapiURL={\r\n\t\t\t\t\t\t\t\"/api/purchases/money/today\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tname=\"Ventes du jour\"\r\n\t\t\t\t\t\ticon=\"euro-sign\"\r\n\t\t\t\t\t\tcolor=\"green\"\r\n                        suffix=\" €\"\r\n\t\t\t\t\t/>\r\n                    <InformationCard\r\n\t\t\t\t\t\tapiURL={\r\n\t\t\t\t\t\t\t\"/api/purchases/count/today\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tname=\"Nombre de consos aujourd'hui\"\r\n\t\t\t\t\t\ticon=\"beer\"\r\n\t\t\t\t\t\tcolor=\"yellow\"\r\n\t\t\t\t\t/>\r\n                    <InformationCard\r\n\t\t\t\t\t\tapiURL={\r\n\t\t\t\t\t\t\t\"/api/purchases/count/yesterday\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tname=\"Nombre de consos hier\"\r\n\t\t\t\t\t\ticon=\"beer\"\r\n\t\t\t\t\t\tcolor=\"yellow\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"row\">\r\n                    <ProductPlotCard name=\"Historique des ventes\" apiURL={\r\n\t\t\t\t\t\t\t\"/api/purchases\"\r\n\t\t\t\t\t\t}\r\n                        bootstrapSubdiv={\"col-12 col-sm-8 d-flex\"}/>\r\n\t\t\t\t\t<TableCard\r\n\t\t\t\t\t\tbootstrapSubdiv=\"col-12 col-sm-4 d-flex\"\r\n\t\t\t\t\t\tname=\"Dernières consos\"\r\n\t\t\t\t\t\tapiURL={\r\n\t\t\t\t\t\t\t\"/api/purchases/history\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpageSize={14}\r\n\t\t\t\t\t\theader={[\r\n\t\t\t\t\t\t\t{ name: \"Surnom\", apiKey: \"customer\", href: true },\r\n\t\t\t\t\t\t\t{ name: \"Produit\", apiKey: \"product\", href: true },\r\n\t\t\t\t\t\t\t{ name: \"Date\", apiKey: \"date\" },\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Dashboard;\r\n","import React from \"react\";\r\nimport TableCard from './TableCard';\r\nimport '../css/App.css';\r\n\r\nclass Users extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n          isLoaded: false,\r\n          users: []\r\n        };\r\n    }\r\n\r\n    render() {\r\n      return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row mb-2 mb-xl-3\">\r\n                <div className=\"col-auto d-none d-sm-block\">\r\n                    <h3>{'Clients'}</h3>\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <TableCard bootstrapSubdiv=\"col\" name=\"Clients\" apiURL='/api/clients' baseURL='/clients/' buttonText=\"Voir plus\" idField=\"id\" header={\r\n                    [\r\n                        { name: \"Surnom\", apiKey: \"surname\" },\r\n                        { name: \"Montant dépensé\", apiKey: \"spent\" },\r\n                        { name: \"Promotion\", apiKey: \"year\" },\r\n                        { name: \"Status\", apiKey: \"status\" }\r\n                    ]\r\n                } floatingFilter={true} filter={true} sort={true}/>\r\n            </div> \r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\nexport default Users;","import React from \"react\";\r\nimport \"../css/Card.css\";\r\nimport moment from \"moment\";\r\nimport TimeSerieCard from \"./TimeSerieCard\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass ConsoPlotCard extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tdata: [],\r\n\t\t\tlayout: {},\r\n\t\t\tloaded: false,\r\n\t\t};\r\n\t}\r\n\r\n\tgetDate(date) {\r\n\t\treturn moment(date).format(\"YYYY-MM-DD\");\r\n\t}\r\n\r\n\tunpack(rows, key) {\r\n\t\treturn rows.map(function (row) {\r\n\t\t\treturn row[key];\r\n\t\t});\r\n\t}\r\n\r\n\tdisplay(data, hist) {\r\n\t\tvar trace = {\r\n\t\t\ttype: \"scatter\",\r\n\t\t\tmode: \"lines\",\r\n\t\t\tname: \"Cumul\",\r\n\t\t\tx: this.unpack(data, \"x\"),\r\n\t\t\ty: this.unpack(data, \"y\"),\r\n\t\t\tline: { color: \"#EF78B1\" },\r\n\t\t};\r\n\r\n\t\tvar hist_trace = {\r\n\t\t\tx: this.unpack(hist, \"x\"),\r\n\t\t\ty: this.unpack(hist, \"y\"),\r\n\t\t\tname: \"Consommation journalières\",\r\n\t\t\tyaxis: \"y2\",\r\n\t\t\ttype: \"bar\",\r\n\t\t};\r\n\r\n\t\tvar layout = {\r\n\t\t\tbargap: 0.1,\r\n\t\t\tbargroupgap: 0.2,\r\n\t\t\tshowlegend: false,\r\n\t\t\tbarmode: \"overlay\",\r\n\t\t\txaxis: {\r\n\t\t\t\tautorange: true,\r\n\t\t\t\trange: [\r\n\t\t\t\t\tthis.getDate(\r\n\t\t\t\t\t\tmoment(data[data.length - 1].x)\r\n\t\t\t\t\t\t\t.subtract(1, \"months\")\r\n\t\t\t\t\t\t\t.format(\"YYYY-MM-DD\")\r\n\t\t\t\t\t),\r\n\t\t\t\t\tthis.getDate(data[data.length - 1].x),\r\n\t\t\t\t],\r\n\t\t\t\trangeselector: {\r\n\t\t\t\t\tbuttons: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t\t\tlabel: \"1 mois\",\r\n\t\t\t\t\t\t\tstep: \"month\",\r\n\t\t\t\t\t\t\tstepmode: \"backward\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcount: 6,\r\n\t\t\t\t\t\t\tlabel: \"6 mois\",\r\n\t\t\t\t\t\t\tstep: \"month\",\r\n\t\t\t\t\t\t\tstepmode: \"backward\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ step: \"all\", label: \"Tout\" },\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t\trangeslider: {\r\n\t\t\t\t\trange: [\r\n\t\t\t\t\t\tthis.getDate(data[0].x),\r\n\t\t\t\t\t\tthis.getDate(data[data.length - 1].x),\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t\ttype: \"date\",\r\n\t\t\t},\r\n\t\t\tyaxis: {\r\n\t\t\t\ttitle: \"Consos cumulées\",\r\n\t\t\t\tautorange: true,\r\n\t\t\t\ttype: \"linear\",\r\n\t\t\t\toverlaying: \"y2\",\r\n\t\t\t},\r\n\t\t\tyaxis2: {\r\n\t\t\t\ttitle: \"Consos journalières\",\r\n\t\t\t\ttitlefont: { color: \"rgb(255, 127, 14)\" },\r\n\t\t\t\ttickfont: { color: \"rgb(255, 127, 14)\" },\r\n\t\t\t\tside: \"right\",\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tthis.setState({\r\n\t\t\tlayout: layout,\r\n\t\t\tdata: [trace, hist_trace],\r\n\t\t\tloaded: true,\r\n\t\t});\r\n\t}\r\n\r\n\tprocessData(rawData) {\r\n\t\tvar data = [];\r\n\t\tvar hist = [];\r\n\r\n\t\tvar total = 0;\r\n\t\tvar sub_total = 0;\r\n\r\n\t\tvar current_date = moment(rawData[0].timestamp);\r\n\r\n\t\tfor (var item of rawData) {\r\n\t\t\ttotal++;\r\n\r\n\t\t\tdata.push({\r\n\t\t\t\tx: moment(item.timestamp).format(\"YYYY-MM-DD HH:mm:ss\"),\r\n\t\t\t\ty: total,\r\n\t\t\t});\r\n\r\n\t\t\tvar date = moment(item.timestamp);\r\n\t\t\tdate.subtract(6, \"hours\");\r\n\r\n\t\t\tif (\r\n\t\t\t\tdate.dayOfYear() !== current_date.dayOfYear() ||\r\n\t\t\t\tdate.year() !== current_date.year()\r\n\t\t\t) {\r\n\t\t\t\thist.push({\r\n\t\t\t\t\tx: current_date.format(\"YYYY-MM-DD\") + \" 00:00:00\",\r\n\t\t\t\t\ty: sub_total,\r\n\t\t\t\t});\r\n\t\t\t\tcurrent_date = date;\r\n\t\t\t\tsub_total = 0;\r\n\t\t\t\tsub_total++;\r\n\t\t\t} else {\r\n\t\t\t\tsub_total++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thist.push({\r\n\t\t\tx: current_date.format(\"YYYY-MM-DD\") + \" 00:00:00\",\r\n\t\t\ty: sub_total,\r\n\t\t});\r\n\r\n\t\tthis.display(data, hist);\r\n\t}\r\n\r\n\tfetchData() {\r\n\t\tthis.setState({\r\n\t\t\tloaded: false,\r\n\t\t});\r\n\t\tfetch(this.props.apiURL, {\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.then((res) => {\r\n\t\t\t\treturn res.json();\r\n\t\t\t})\r\n\t\t\t.then(\r\n\t\t\t\t(result) => {\r\n\t\t\t\t\tthis.processData(result);\r\n\t\t\t\t},\r\n\t\t\t\t// Note: it's important to handle errors here\r\n\t\t\t\t// instead of a catch() block so that we don't swallow\r\n\t\t\t\t// exceptions from actual bugs in components.\r\n\t\t\t\t(error) => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (this.props.updateEvent !== prevProps.updateEvent) {\r\n\t\t\tthis.fetchData();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.fetchData();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<TimeSerieCard\r\n\t\t\t\tlayout={this.state.layout}\r\n\t\t\t\tdata={this.state.data}\r\n\t\t\t\tname={this.props.name}\r\n\t\t\t\tloaded={this.state.loaded}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = function (state) {\r\n\treturn {\r\n\t\tupdateEvent: state.updateEvent,\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps)(ConsoPlotCard);\r\n","import React from \"react\";\r\nimport \"../css/App.css\";\r\nimport InformationCard from \"./InformationCard\";\r\nimport TableCard from './TableCard';\r\nimport ConsoPlotCard from './ConsoPlotCard'\r\n\r\nclass User extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsurname: \"\",\r\n\t\t};\r\n\t}\r\n\r\n\tgetName() {\r\n\t\tfetch(\r\n\t\t\t\"/api/clients/\" +\r\n\t\t\t\tthis.props.match.params.id +\r\n\t\t\t\t\"/profil\",\r\n\t\t\t{\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t)\r\n\t\t\t.then((res) => {\r\n\t\t\t\treturn res.json();\r\n\t\t\t})\r\n\t\t\t.then(\r\n\t\t\t\t(result) => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tsurname: result.nickname,\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t// Note: it's important to handle errors here\r\n\t\t\t\t// instead of a catch() block so that we don't swallow\r\n\t\t\t\t// exceptions from actual bugs in components.\r\n\t\t\t\t(error) => {\r\n                    console.log(error)\r\n                }\r\n\t\t\t);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getName();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t<div className=\"row mb-2 mb-xl-3\">\r\n\t\t\t\t\t<div className=\"col-auto d-none d-sm-block\">\r\n\t\t\t\t\t\t<h3>{this.state.surname}</h3>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<InformationCard\r\n\t\t\t\t\t\tapiURL={\r\n\t\t\t\t\t\t\t\"/api/clients/\" +\r\n\t\t\t\t\t\t\tthis.props.match.params.id +\r\n\t\t\t\t\t\t\t\"/spent\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsuffix=\" €\"\r\n\t\t\t\t\t\tname=\"Montant dépensé\"\r\n\t\t\t\t\t\ticon=\"euro-sign\"\r\n                        color=\"green\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<InformationCard\r\n\t\t\t\t\t\tapiURL={\r\n\t\t\t\t\t\t\t\"/api/clients/\" +\r\n\t\t\t\t\t\t\tthis.props.match.params.id +\r\n\t\t\t\t\t\t\t\"/rank/promo\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tprefix=\"#\"\r\n\t\t\t\t\t\tname=\"Classement promo\"\r\n\t\t\t\t\t\ticon=\"medal\"\r\n                        color=\"yellow\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<InformationCard\r\n\t\t\t\t\t\tapiURL={\r\n\t\t\t\t\t\t\t\"/api/clients/\" +\r\n\t\t\t\t\t\t\tthis.props.match.params.id +\r\n\t\t\t\t\t\t\t\"/rank/total\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tprefix=\"#\"\r\n\t\t\t\t\t\tname=\"Classement général\"\r\n\t\t\t\t\t\ticon=\"trophy\"\r\n                        color=\"yellow\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n                <div className=\"row\">\r\n                    <ConsoPlotCard name=\"Historique\" apiURL={\r\n\t\t\t\t\t\t\t\"/api/clients/\" +\r\n\t\t\t\t\t\t\tthis.props.match.params.id +\r\n\t\t\t\t\t\t\t\"/purchases\"\r\n\t\t\t\t\t\t}/>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <TableCard bootstrapSubdiv=\"col-12 col-sm-6\" name=\"Historique\" apiURL={ '/api/clients/' +\r\n\t\t\t\t\t\t\tthis.props.match.params.id + '/history'} pageSize={10} header={\r\n                        [\r\n                            { name: \"Produit\", apiKey: \"product\", href: true },\r\n                            { name: \"Date\", apiKey: \"datetime\" }\r\n                        ]\r\n                    }/>\r\n                    <TableCard bootstrapSubdiv=\"col-12 col-sm-6\" name=\"Top consommation\" apiURL={ '/api/clients/' +\r\n\t\t\t\t\t\t\tthis.props.match.params.id + '/top_products'} pageSize={10} header={\r\n                        [\r\n                            { name: \"Produit\", apiKey: \"product\", href: true },\r\n                            { name: \"Quantité\", apiKey: \"quantity\" }\r\n                        ]\r\n                    }/>\r\n                </div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default User;\r\n","import React from \"react\";\r\nimport TableCard from './TableCard';\r\nimport '../css/App.css';\r\n\r\nclass Users extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n          isLoaded: false,\r\n          users: []\r\n        };\r\n    }\r\n\r\n    render() {\r\n      return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row mb-2 mb-xl-3\">\r\n                <div className=\"col-auto d-none d-sm-block\">\r\n                    <h3>{'Produits'}</h3>\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <TableCard name=\"Produits\" apiURL='/api/products' baseURL='/products/' buttonText=\"Détails\" idField=\"id\" header={\r\n                    [\r\n                        { name: \"Nom\", apiKey: \"name\" },\r\n                        { name: \"Nombre vendu\", apiKey: \"count\" },\r\n                        { name: \"Prix\", apiKey: \"price\" }\r\n                    ]\r\n                }\r\n                defaultSort={{ col: \"count\", sort: \"desc\" }} floatingFilter={true} filter={true} sort={true}/>\r\n            </div> \r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\nexport default Users;","import React from \"react\";\r\nimport \"../css/App.css\";\r\nimport InformationCard from \"./InformationCard\";\r\nimport TableCard from './TableCard';\r\nimport ProductPlotCard from './ProductPlotCard'\r\n\r\nclass User extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tname: \"\",\r\n\t\t};\r\n\t}\r\n\r\n\tgetName() {\r\n\t\tfetch(\r\n\t\t\t\"/api/products/\" +\r\n\t\t\t\tthis.props.match.params.id +\r\n\t\t\t\t\"/data\",\r\n\t\t\t{\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t)\r\n\t\t\t.then((res) => {\r\n\t\t\t\treturn res.json();\r\n\t\t\t})\r\n\t\t\t.then(\r\n\t\t\t\t(result) => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tname: result.name,\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t// Note: it's important to handle errors here\r\n\t\t\t\t// instead of a catch() block so that we don't swallow\r\n\t\t\t\t// exceptions from actual bugs in components.\r\n\t\t\t\t(error) => {\r\n                    console.log(error)\r\n                }\r\n\t\t\t);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getName();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t<div className=\"row mb-2 mb-xl-3\">\r\n\t\t\t\t\t<div className=\"col-auto d-none d-sm-block\">\r\n\t\t\t\t\t\t<h3>{this.state.name}</h3>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<InformationCard\r\n\t\t\t\t\t\tapiURL={\r\n\t\t\t\t\t\t\t\"/api/products/\" +\r\n\t\t\t\t\t\t\tthis.props.match.params.id +\r\n\t\t\t\t\t\t\t\"/price\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsuffix=\" €\"\r\n\t\t\t\t\t\tname=\"Prix\"\r\n\t\t\t\t\t\ticon=\"euro-sign\"\r\n                        color=\"green\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<InformationCard\r\n\t\t\t\t\t\tapiURL={\r\n\t\t\t\t\t\t\t\"/api/products/\" +\r\n\t\t\t\t\t\t\tthis.props.match.params.id +\r\n\t\t\t\t\t\t\t\"/quantity_sold\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tname=\"Nombre vendu\"\r\n\t\t\t\t\t\ticon=\"cash-register\"\r\n                        color=\"yellow\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n                <div className=\"row\">\r\n                    <ProductPlotCard name=\"Historique des ventes\" apiURL={\r\n\t\t\t\t\t\t\t\"/api/products/\" +\r\n\t\t\t\t\t\t\tthis.props.match.params.id +\r\n\t\t\t\t\t\t\t\"/purchases\"\r\n\t\t\t\t\t\t}/>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <TableCard bootstrapSubdiv=\"col-12 col-sm-6\" name=\"Historique des ventes\" apiURL={ '/api/products/' +\r\n\t\t\t\t\t\t\tthis.props.match.params.id + '/history'} pageSize={10} header={\r\n                        [\r\n                            { name: \"Surnom\", apiKey: \"customer\", href: true },\r\n                            { name: \"Date\", apiKey: \"datetime\" }\r\n                        ]\r\n                    }/>\r\n                    <TableCard bootstrapSubdiv=\"col-12 col-sm-6\" name=\"Top consommateur\" apiURL={ '/api/products/' +\r\n\t\t\t\t\t\t\tthis.props.match.params.id + '/top_customers'} pageSize={10} header={\r\n                        [\r\n                            { name: \"Surnom\", apiKey: \"customer\", href: true },\r\n                            { name: \"Quantité\", apiKey: \"quantity\" }\r\n                        ]\r\n                    }/>\r\n                </div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default User;\r\n","import '../css/App.css';\r\nimport React from \"react\";\r\n\r\nclass Loading extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        };\r\n    }\r\n\r\n    render() {\r\n      return (\r\n          <div className=\"loadingContainer\">\r\n            <h2>\r\n                <i className={\"fas fa-fw fa-sync-alt fa-spin\"}></i>\r\n                <span className=\"align-middle\"> {this.props.text}</span>\r\n            </h2>\r\n          </div>\r\n      );\r\n    }\r\n  }\r\n\r\nexport default Loading;\r\n","import '../css/App.css';\r\nimport React from \"react\";\r\n\r\nclass LoadError extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        };\r\n    }\r\n\r\n    render() {\r\n      return (\r\n          <div className=\"loadingContainer\">\r\n            <h2>\r\n                <i className={\"fas fa-fw fa-exclamation-triangle\"}></i>\r\n                <span className=\"align-middle\"> Une erreur c'est produite lors de la dernière mise à jour !</span>\r\n            </h2>\r\n          </div>\r\n      );\r\n    }\r\n  }\r\n\r\nexport default LoadError;\r\n","import \"../css/App.css\";\nimport Dashboard from \"./Dashboard\";\nimport Users from \"./Users\";\nimport React from \"react\";\nimport User from \"./User\";\nimport Drinks from \"./Drinks\";\nimport Drink from \"./Drink\";\nimport Loading from \"./Loading\";\nimport LoadError from \"./LoadError\";\nimport { Switch, Route } from \"react-router-dom\";\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\n\tgetRightPage() {\n\t\tif (this.props.serverStatus === -1) {\n\t\t\treturn <Loading text={\"Chargement\"}></Loading>;\n\t\t}\n\t\tif (this.props.serverStatus === \"0\") {\n\t\t\treturn (\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route exact path=\"/\" component={Dashboard} />\n\t\t\t\t\t<Route exact path=\"/clients\" component={Users} />\n\t\t\t\t\t<Route exact path=\"/products\" component={Drinks} />\n\t\t\t\t\t<Route path=\"/clients/:id\" component={User} />\n\t\t\t\t\t<Route path=\"/products/:id\" component={Drink} />\n\t\t\t\t</Switch>\n\t\t\t);\n\t\t} else if (this.props.serverStatus === \"1\")\n\t\t\treturn (\n\t\t\t\t<Loading\n\t\t\t\t\ttext={\"Mise à jour en cours. Veuillez patienter\"}></Loading>\n\t\t\t);\n\t\telse return <LoadError></LoadError>;\n\t}\n\n\trender() {\n\t\treturn <div className=\"content\">{this.getRightPage()}</div>;\n\t}\n}\n\nexport default App;\n","import React from \"react\";\r\nimport \"../css/Sidebar.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nclass Sidebar extends React.Component {\r\n\tstatic propTypes = {\r\n\t\tmatch: PropTypes.object.isRequired,\r\n\t\tlocation: PropTypes.object.isRequired,\r\n\t\thistory: PropTypes.object.isRequired,\r\n\t};\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tactiveItemId: props.activeItemId,\r\n\t\t\tlatestUpdate: \"N/C\",\r\n\t\t};\r\n\t}\r\n\r\n\tgetLatestUpdate() {\r\n\t\tfetch(\"/api/update\", {\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAccept: \"application/plain-text\",\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.then((res) => {\r\n\t\t\t\treturn res.text();\r\n\t\t\t})\r\n\t\t\t.then(\r\n\t\t\t\t(result) => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tlatestUpdate:\r\n\t\t\t\t\t\t\tthis.props.serverStatus === \"0\" ? result : \"N/C\",\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t// Note: it's important to handle errors here\r\n\t\t\t\t// instead of a catch() block so that we don't swallow\r\n\t\t\t\t// exceptions from actual bugs in components.\r\n\t\t\t\t(error) => {}\r\n\t\t\t);\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tvar self = this;\r\n\t\tfetch(\"/api/update\", { method: \"POST\" }).then(\r\n\t\t\t(res) => {\r\n\t\t\t\tself.props.updateCb(true);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getLatestUpdate();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (prevProps.serverStatus !== this.props.serverStatus) {\r\n\t\t\tthis.getLatestUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<nav\r\n\t\t\t\tid=\"sidebar\"\r\n\t\t\t\tclassName={\r\n\t\t\t\t\t\"sidebar \" + (this.props.collapsed ? \"collapsed\" : \"\")\r\n\t\t\t\t}>\r\n\t\t\t\t<div className=\"sidebar-top\"></div>\r\n\t\t\t\t<ul className=\"sidebar-nav\">\r\n\t\t\t\t\t{this.props.items.map((item) => (\r\n\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\tkey={item.id}\r\n\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\"sidebar-item \" +\r\n\t\t\t\t\t\t\t\t(item.link === this.props.location.pathname\r\n\t\t\t\t\t\t\t\t\t? \"active\"\r\n\t\t\t\t\t\t\t\t\t: \"\")\r\n\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t<Link to={item.link} className=\"sidebar-link\">\r\n\t\t\t\t\t\t\t\t<i className={\"fas fa-fw fa-\" + item.icon}></i>\r\n\t\t\t\t\t\t\t\t<span className=\"align-middle\">\r\n\t\t\t\t\t\t\t\t\t{item.name}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<div className=\"sidebar-footer\">\r\n\t\t\t\t\t<div className=\"sidebar-footer-item\">\r\n\t\t\t\t\t\tDernière mise à jour le <br /> {this.state.latestUpdate}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"sidebar-footer-item clickable\"\r\n\t\t\t\t\t\tonClick={this.update.bind(this)}>\r\n\t\t\t\t\t\tMettre à jour\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<div className=\"sidebar-footer-item\">\r\n\t\t\t\t\t\tv1.0 - Pour le Baritech\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t</div>\r\n\t\t\t</nav>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withRouter(Sidebar);\r\n","import \"../css/App.css\";\r\nimport React from \"react\";\r\n\r\n\r\nclass Login extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class=\"main d-flex justify-content-center w-100\">\r\n\t\t\t\t<main class=\"content d-flex p-0\">\r\n\t\t\t\t\t<div class=\"container d-flex flex-column\">\r\n\t\t\t\t\t\t<div class=\"row h-100\">\r\n\t\t\t\t\t\t\t<div class=\"col-sm-10 col-md-8 col-lg-6 mx-auto d-table h-100\">\r\n\t\t\t\t\t\t\t\t<div class=\"d-table-cell align-middle\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"card\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"card-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"m-sm-4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<form action=\"/login\" method=\"post\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Nom d'utilisateur</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-control form-control-lg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Nom d'utilisateur\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Mot de passe</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-control form-control-lg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Mot de passe\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-center mt-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"btn btn-lg btn-primary\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSe connecter\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./css/index.css\";\nimport App from \"./components/App\";\nimport Sidebar from \"./components/Sidebar\";\nimport Login from \"./components/Login\"\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport { createStore } from \"redux\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport Loading  from \"./components/Loading\"\n\nclass PrivateRoute extends React.Component {\n\n    constructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tauth: false,\n            validated: false\n\t\t};\n\t}\n  \n    componentDidMount(){\n        this.setState({ validated: false});\n        fetch(\"/dummy\", {\n          method: \"POST\"\n        })\n        .then((res) => {\n          this.setState({ auth: res.ok,validated: true });\n          console.log(res.ok)\n        })\n        .catch((err) => {\n            this.setState({ auth: false,validated: true });\n        }) \n    }\n    \n    render ()\n    {\n        if(!this.state.validated)\n            return <Loading></Loading>\n\n        if(this.state.auth)\n        {\n            return (<Route {... this.props.rest} >\n                {this.props.children}\n            </Route>)\n        }\n        else\n        {\n            return (<Route {... this.props.rest} >\n                <Redirect to=\"/login\" />\n            </Route>)\n        }\n        \n    }\n}\nclass Main extends React.Component {\n\tupdateTimer = null;\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tisSidebarCollapsed: false,\n\t\t\tserverStatus: -1,\n\t\t};\n\n\t\tthis.handleSidebarToggle = this.handleSidebarToggle.bind(this);\n\t}\n\n\treducer(state = { updateEvent: true }, action) {\n\t\tswitch (action.type) {\n\t\t\tcase \"UPDATE\":\n\t\t\t\tconsole.log();\n\t\t\t\treturn { updateEvent: !state.updateEvent };\n\t\t\tdefault:\n\t\t\t\treturn {\n\t\t\t\t\tupdateEvent: state.updateEvent,\n\t\t\t\t};\n\t\t}\n\t}\n\n\tstore = createStore(this.reducer);\n\n\thandleSidebarToggle(e) {\n\t\tthis.setState((state) => ({\n\t\t\tisSidebarCollapsed: !state.isSidebarCollapsed,\n\t\t}));\n\t}\n\n\tgetStatus(updating = false) {\n\t\treturn fetch(\"/api/status\")\n\t\t\t.then((res) => {\n\t\t\t\treturn res.text();\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(result) => {\n\t\t\t\t\tthis.setState((prevState, props) => ({\n\t\t\t\t\t\tserverStatus: result,\n\t\t\t\t\t}));\n\t\t\t\t\tif (result === \"0\" && updating) {\n\t\t\t\t\t\tthis.store.dispatch({ type: \"UPDATE\" });\n\t\t\t\t\t}\n\n\t\t\t\t\tif (result === \"1\") {\n\t\t\t\t\t\tthis.updateTimer = setTimeout(\n\t\t\t\t\t\t\t() => this.getStatus(updating),\n\t\t\t\t\t\t\t5000\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(error) => {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getStatus();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.updateTimer);\n\t}\n\n\trender() {\n\t\tconst isSidebarCollapsed = this.state.isSidebarCollapsed;\n\t\treturn (\n\t\t\t<BrowserRouter>\n\t\t\t\t<React.StrictMode>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path=\"/login\">\n\t\t\t\t\t\t\t<Login />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<PrivateRoute path=\"/\">\n\t\t\t\t\t\t\t<Provider store={this.store}>\n\t\t\t\t\t\t\t\t<Sidebar\n\t\t\t\t\t\t\t\t\tcollapsed={isSidebarCollapsed}\n\t\t\t\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\t\t\t\t\t\tname: \"Tableau de bord\",\n\t\t\t\t\t\t\t\t\t\t\ticon: \"home\",\n\t\t\t\t\t\t\t\t\t\t\tlink: \"/\",\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: 1,\n\t\t\t\t\t\t\t\t\t\t\tname: \"Clients\",\n\t\t\t\t\t\t\t\t\t\t\ticon: \"users\",\n\t\t\t\t\t\t\t\t\t\t\tlink: \"/clients\",\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: 2,\n\t\t\t\t\t\t\t\t\t\t\tname: \"Produits\",\n\t\t\t\t\t\t\t\t\t\t\ticon: \"beer\",\n\t\t\t\t\t\t\t\t\t\t\tlink: \"/products\",\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\tactiveItemId={0}\n\t\t\t\t\t\t\t\t\tserverStatus={this.state.serverStatus}\n\t\t\t\t\t\t\t\t\tupdateCb={this.getStatus.bind(this)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"main\">\n\t\t\t\t\t\t\t\t\t<nav className=\"navbar\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"sidebar-toggle\">\n\t\t\t\t\t\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fas fa-fw fa-bars hamburger\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.handleSidebarToggle\n\t\t\t\t\t\t\t\t\t\t\t\t}></i>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</nav>\n\t\t\t\t\t\t\t\t\t<App\n\t\t\t\t\t\t\t\t\t\tserverStatus={this.state.serverStatus}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Provider>\n\t\t\t\t\t\t</PrivateRoute>\n\t\t\t\t\t</Switch>\n\t\t\t\t</React.StrictMode>\n\t\t\t</BrowserRouter>\n\t\t);\n\t}\n}\n\nReactDOM.render(<Main title=\"Dashboard\" />, document.getElementById(\"wrapper\"));\n"],"sourceRoot":""}